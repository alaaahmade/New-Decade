import{I as m,be as Et,b2 as Dt,b6 as Rt,bg as u,bh as ct,a9 as i,ae as p,b3 as gt,ao as b,ag as Ut,bj as O,a$ as Bt,b8 as Vt,am as Lt,ai as zt}from"./index-7baedad1.js";import{l as Gt}from"./blog-ab74bd07.js";import{u as $t,c as At,a,d as Nt,g as Wt,F as Kt,R as s,C as Mt}from"./form-provider-f0797274.js";import{G as d,C as c,o as Qt}from"./yup-573c9287.js";import{C as wt}from"./numeral-64476a1d.js";import{L as Jt}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";function jt({currentHero:t}){const[g,_t]=m.useState(!1),[ft,y]=m.useState(null),Tt=Et(),h=Dt("up","md"),{enqueueSnackbar:ut}=$t(),Ot=Rt(),yt=At().shape({title_ar:a().min(4).max(100).required("الجزء الثاني من العنوان مطلوب باللغة العربية"),title_en:a().min(4).max(100).required("English Seconds title is required"),title_cr:a().min(4).max(100).required("kurd Seconds title is required"),description_ar:a().min(10).max(5e3).required("الوصف مطلوب باللغة العربية"),description_en:a().min(10).max(5e3).required("English Description is required"),description_cr:a().min(10).max(5e3).required("kurd Description is required"),buttonOneT_ar:a().min(4).max(50).required("نص المفتاح الأول مطلوب بالعربية"),buttonOneT_en:a().min(4).max(50).required("english firsts button text is required"),buttonOneT_cr:a().min(4).max(50).required("kurd firsts button text is required"),buttonOneP_ar:a().min(4).max(100).required("مسار المفتاح الأول مطلوب بالعربية"),buttonOneP_en:a().min(4).max(100).required("english firsts button path is required"),buttonOneP_cr:a().min(4).max(100).required("kurd firsts button path is required"),image:a().min(10).max(500).required("Image File is required")}),f=m.useMemo(()=>{var o,e,l,x,j,_,P,q,C,S,F,I,E,D,R,U,B,V,L,z,G,$,A,N,W,K,M,Q,J,X,Y,Z,v,H,tt,it,nt,st,et,at,lt,ot,dt,xt,mt,bt,ht,pt;return{title_ar:((e=(o=t==null?void 0:t.lang)==null?void 0:o.ar)==null?void 0:e.title)||"",title_en:((x=(l=t==null?void 0:t.lang)==null?void 0:l.en)==null?void 0:x.title)||"",title_cr:((_=(j=t==null?void 0:t.lang)==null?void 0:j.cr)==null?void 0:_.title)||"",description_ar:((q=(P=t==null?void 0:t.lang)==null?void 0:P.ar)==null?void 0:q.description)||"",description_en:((S=(C=t==null?void 0:t.lang)==null?void 0:C.en)==null?void 0:S.description)||"",description_cr:((I=(F=t==null?void 0:t.lang)==null?void 0:F.cr)==null?void 0:I.description)||"",buttonOneT_ar:((R=(D=(E=t==null?void 0:t.lang)==null?void 0:E.ar)==null?void 0:D.buttonOne)==null?void 0:R.text)||"",buttonOneT_en:((V=(B=(U=t==null?void 0:t.lang)==null?void 0:U.en)==null?void 0:B.buttonOne)==null?void 0:V.text)||"",buttonOneT_cr:((G=(z=(L=t==null?void 0:t.lang)==null?void 0:L.cr)==null?void 0:z.buttonOne)==null?void 0:G.text)||"",buttonOneP_ar:((N=(A=($=t==null?void 0:t.lang)==null?void 0:$.ar)==null?void 0:A.buttonOne)==null?void 0:N.link)||"",buttonOneP_en:((M=(K=(W=t==null?void 0:t.lang)==null?void 0:W.en)==null?void 0:K.buttonOne)==null?void 0:M.link)||"",buttonOneP_cr:((X=(J=(Q=t==null?void 0:t.lang)==null?void 0:Q.ar)==null?void 0:J.buttonOne)==null?void 0:X.link)||"",buttonTowT_ar:((v=(Z=(Y=t==null?void 0:t.lang)==null?void 0:Y.ar)==null?void 0:Z.buttonTow)==null?void 0:v.text)||"",buttonTowT_en:((it=(tt=(H=t==null?void 0:t.lang)==null?void 0:H.en)==null?void 0:tt.buttonTow)==null?void 0:it.text)||"",buttonTowT_cr:((et=(st=(nt=t==null?void 0:t.lang)==null?void 0:nt.cr)==null?void 0:st.buttonTow)==null?void 0:et.text)||"",buttonTowP_ar:((ot=(lt=(at=t==null?void 0:t.lang)==null?void 0:at.ar)==null?void 0:lt.buttonTow)==null?void 0:ot.link)||"",buttonTowP_en:((mt=(xt=(dt=t==null?void 0:t.lang)==null?void 0:dt.ar)==null?void 0:xt.buttonTow)==null?void 0:mt.link)||"",buttonTowP_cr:((pt=(ht=(bt=t==null?void 0:t.lang)==null?void 0:bt.cr)==null?void 0:ht.buttonTow)==null?void 0:pt.link)||"",image:(t==null?void 0:t.image)||""}},[t]),k=Nt({resolver:async(o,e,l)=>await Qt(yt)(o,e,l),defaultValues:f}),{reset:T,watch:kt,setValue:w,handleSubmit:r,formState:{isSubmitting:rt,isValid:Yt}}=k,n=kt();m.useEffect(()=>{t&&T(f)},[t,f,T]);const Pt=r(async o=>{try{let e="";if(g){t!=null&&t.image&&await u.post("/deleteFile",{fileUrl:t.image});const x=new FormData;if(n.image){x.append("file",n.image);const j=await u.post("/uploadFile/platformHero",x,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:_}=j.data.data;e=_}}const l={image:e||t.image,lang:{ar:{title:n==null?void 0:n.title_ar,description:n==null?void 0:n.description_ar,buttonOne:{text:n==null?void 0:n.buttonOneT_ar,link:n==null?void 0:n.buttonOneP_ar},buttonTow:{text:n==null?void 0:n.buttonTowT_ar,link:n==null?void 0:n.buttonTowP_ar}},en:{title:n==null?void 0:n.title_en,description:n==null?void 0:n.description_en,buttonOne:{text:n==null?void 0:n.buttonOneT_en,link:n==null?void 0:n.buttonOneP_en},buttonTow:{text:n==null?void 0:n.buttonTowT_en,link:n==null?void 0:n.buttonTowP_en}},cr:{title:n==null?void 0:n.title_cr,description:n==null?void 0:n.description_cr,buttonOne:{text:n==null?void 0:n.buttonOneT_cr,link:n==null?void 0:n.buttonOneP_cr},buttonTow:{text:n==null?void 0:n.buttonTowT_cr,link:n==null?void 0:n.buttonTowP_cr}}}};await u.put("/edit/platform/hero",l),T(),Ot.onFalse(),ut(t?"Update success!":"Create success!"),window.location.reload(),ct.success("Hero's Updated Successfully.")}catch(e){ct.error(e.response.data.msg||"Something went wrong!"),console.error(e)}}),qt=m.useCallback(o=>{const e=o[0];_t(!0);const l=Object.assign(e,{preview:URL.createObjectURL(e)});y(e),e&&w("image",l,{shouldValidate:!0})},[w]),Ct=m.useCallback(()=>{w("image",null),y(null)},[w]),St=i.jsxs(i.Fragment,{children:[h&&i.jsxs(d,{md:4,children:[i.jsx(p,{variant:"h6",sx:{mb:.5},children:"Texts"}),i.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),i.jsx(d,{xs:12,md:8,children:i.jsxs(wt,{children:[!h&&i.jsx(c,{title:"Texts"}),i.jsx(c,{title:"Arabic Text"}),i.jsxs(gt,{spacing:3,sx:{p:3},children:[i.jsx(s,{name:"title_ar",label:"العنوان",sx:{direction:"rtl"}}),i.jsx(s,{type:"text",name:"description_ar",label:"الوصف بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonOneT_ar",label:"نص المفتاح الأول بالعربية",sx:{direction:"rtl",width:"49%"}}),i.jsx(s,{name:"buttonOneP_ar",label:"مسار المفتاح الأول",sx:{width:"49%"}})]}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonTowT_ar",label:"نص المفتاح الثاني بالعربية",sx:{direction:"rtl",width:"49%"}}),i.jsx(s,{name:"buttonTowP_ar",label:"مسار المفتاح الثاني",sx:{width:"49%"}})]}),i.jsx(c,{title:"English Text"}),i.jsx(s,{name:"title_en",label:"english title"}),i.jsx(s,{type:"text",name:"description_en",label:"english description",multiline:!0,rows:3}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonOneT_en",label:"english firsts button text",sx:{width:"49%"}}),i.jsx(s,{name:"buttonOneP_en",label:"firsts button path",sx:{width:"49%"}})]}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonTowT_en",label:"english seconds button text",sx:{width:"49%"}}),i.jsx(s,{name:"buttonTowP_en",label:"seconds button path",sx:{width:"49%"}})]}),i.jsx(c,{title:"Kurd Text"}),i.jsx(s,{name:"title_cr",label:"kurd title"}),i.jsx(s,{type:"text",name:"description_cr",label:"kurd description",multiline:!0,rows:3}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonOneT_cr",label:"kurd firsts button text",sx:{width:"49%"}}),i.jsx(s,{name:"buttonOneP_cr",label:"firsts button path",sx:{width:"49%"}})]}),i.jsxs(b,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(s,{name:"buttonTowT_cr",label:"kurd seconds button text",sx:{width:"49%"}}),i.jsx(s,{name:"buttonTowP_cr",label:"seconds button path",sx:{width:"49%"}})]})]})]})})]}),Ft=i.jsxs(i.Fragment,{children:[h&&i.jsx(d,{md:4}),i.jsxs(d,{xs:12,md:8,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(Ut,{color:"inherit",variant:"outlined",size:"large",onClick:()=>Tt.push(O.dashboard.root),children:"cancel"}),i.jsx(Jt,{type:"submit",variant:"contained",size:"large",loading:rt,sx:{ml:2},onClick:r,children:"Save Hero"})]})]}),It=i.jsxs(i.Fragment,{children:[h&&i.jsxs(d,{md:4,children:[i.jsx(p,{variant:"h6",sx:{mb:.5},children:"Image"}),i.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"hero Section Image..."})]}),i.jsx(d,{xs:12,md:8,children:i.jsxs(wt,{sx:{p:2},children:[!h&&i.jsx(c,{title:"Image"}),i.jsxs(gt,{spacing:1.5,children:[i.jsx(p,{variant:"subtitle2",children:"Image"}),i.jsx(Wt,{name:"image",maxSize:3145728,onDrop:qt,onDelete:Ct,file:n.image||ft})]})]})})]});return i.jsx(Kt,{methods:k,onSubmit:Pt,children:i.jsxs(d,{container:!0,spacing:3,children:[St,It,Ft]})})}jt.propTypes={currentHero:Bt.object};function Xt(){const t=Vt(),{hero:g}=Gt();return i.jsxs(Lt,{maxWidth:t.themeStretch?!1:"lg",children:[i.jsx(Mt,{heading:"Edit Hero Section",links:[{name:"Dashboard",href:O.dashboard.root},{name:"platform hero",href:O.dashboard.service.root}],sx:{mb:{xs:3,md:5}}}),g&&i.jsx(jt,{currentHero:g})]})}function ai(){return i.jsxs(i.Fragment,{children:[i.jsx(zt,{children:i.jsx("title",{children:" Dashboard: Platform Edit"})}),i.jsx(Xt,{})]})}export{ai as default};
