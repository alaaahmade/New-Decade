import{a$ as R,I as w,bG as Ui,a9 as i,b3 as f,ae as x,ao as ei,ag as di,be as Pi,b2 as Bi,bg as N,bh as ni,bj as oi,b8 as Vi,am as Ni,ai as $i}from"./index-7baedad1.js";import{n as Wi}from"./blog-ab74bd07.js";import{c as Li,a as l,d as ki,F as Di,g as Gi,u as Hi,e as ai,R as g,C as Mi}from"./form-provider-f0797274.js";import{o as Ii,G as b,C as $}from"./yup-573c9287.js";import{R as E,c as zi,d as Ki,e as Qi}from"./attributeReduce-55c83204.js";import{d as Ji,a as Xi}from"./RemoveCircleOutline-7d32947f.js";import"./components.styled-0a52fcef.js";import{C as W}from"./numeral-64476a1d.js";import{L as Yi}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";import"./createSvgIcon-43748fa8.js";const hi=({apps:s,app:n,appsDispatch:p,setAllValue:L,listName:k})=>{const[U,K]=w.useState(null);w.useState(null);const[v,T]=w.useState(!1),[ii,li]=w.useState(!1),{setCallBack:si}=w.useContext(Ui),ti=Li().shape({name:l().min(4).max(50).required("name is required"),title:l().min(4).max(100).required("title is required"),descOne:l().min(10).max(5e3).required("First Description is required"),descTow:l().min(10).max(5e3).required("Second Description is required"),buttonOneT:l().min(4).max(50).required("First Button Text is required"),buttonOneP:l().min(4).max(50).required("First Button path is required"),buttonTowT:l().min(4).max(50).required("Second Button Text is required"),buttonTowP:l().min(4).max(50).required("Second Button path is required"),img:l().max(500).required("Image is required")}),z=w.useMemo(()=>{var e,a,o,d;return{name:(n==null?void 0:n.name)||"",title:(n==null?void 0:n.title)||"",descOne:(n==null?void 0:n.descOne)||"",descTow:(n==null?void 0:n.descTow)||"",buttonOneT:((e=n==null?void 0:n.buttonOne)==null?void 0:e.text)||"",buttonOneP:((a=n==null?void 0:n.buttonOne)==null?void 0:a.link)||"",buttonTowT:((o=n==null?void 0:n.buttonTow)==null?void 0:o.text)||"",buttonTowP:((d=n==null?void 0:n.buttonTow)==null?void 0:d.link)||"",img:(n==null?void 0:n.img)||""}},[n]),G=ki({resolver:async(e,a,o)=>await Ii(ti)(e,a,o),defaultValues:z}),{reset:j,watch:H,setValue:P,handleSubmit:D,formState:{isSubmitting:ci,isValid:mi}}=G,B=H(),t=D(async e=>{let a;if(v){n!=null&&n.img&&await axiosReq.post("/deleteFile",{fileUrl:n.img});const o=new FormData;B.img&&(o.append("file",B.img),(await axiosReq.post("/uploadFile/apps",o,{headers:{"Content-Type":"multipart/form-data"}})).data.data)}if(ii){n!=null&&n.descImg&&await axiosReq.post("/deleteFile",{fileUrl:n.descImg});const o=new FormData;if(B.descImg){o.append("file",B.descImg);const d=await axiosReq.post("/uploadFile/apps",o,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:r}=d.data.data;a=r,P("descImg",a)}}});w.useEffect(()=>{n&&(j(z),si(t))},[n,z,j]);const V=e=>{e.preventDefault();const{value:a,id:o,name:d}=e.target,r=s.map(m=>m.id==o?{...m,[d]:a}:m);L(k,r),p({type:"edit",newApps:r})},M=e=>{e.preventDefault();const{value:a,id:o,name:d}=e.target,r=s.map((m,u)=>{if(u==o){if(d==="buttonOneT")return{...m,buttonOne:{...m.buttonOne,text:a}};if(d==="buttonOneP")return{...m,buttonOne:{...m.buttonOne,link:a}};if(d==="buttonTowT")return{...m,buttonTow:{...m.buttonTow,text:a}};if(d==="buttonTowP")return{...m,buttonTow:{...m.buttonTow,link:a}}}return m});L(k,r),p({type:"edit",newApps:r})},Q=(e,a,o)=>{const d=e?e[0]:null,r=s.findIndex(u=>u.id==a.id),m=s.map((u,c)=>c===r?{...u,[o]:d}:u);L(k,m),p({type:"edit",newApps:m,index:r})},J=w.useCallback(e=>{const a=e[0];T(!0);const o=Object.assign(a,{preview:URL.createObjectURL(a)});K(a),a&&P("img",o,{shouldValidate:!0})},[P]),X=w.useCallback(()=>{P("img",null),K(null)},[P]),Y=e=>{const{id:a}=e.target,o=s.filter(d=>d.id!=a);L(k,o),p({type:"remove",id:a,newApps:o})};return i.jsx(Di,{methods:G,onSubmit:t,children:i.jsxs(f,{spacing:3,sx:{p:3},children:[i.jsx(x,{variant:"subtitle2",children:B.name}),i.jsx(E,{id:n.id,onChange:V,name:"name",label:"app Name"}),i.jsx(E,{id:n.id,onChange:V,name:"title",label:"app Title"}),i.jsx(E,{id:n.id,onChange:V,type:"text",name:"descOne",label:"app first description",multiline:!0,rows:3}),i.jsx(E,{id:n.id,onChange:V,type:"text",name:"descTow",label:"app second description",multiline:!0,rows:3}),i.jsxs(ei,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:1},children:[i.jsx(E,{id:n.id,onChange:M,name:"buttonOneT",label:"first button text"}),i.jsx(E,{id:n.id,onChange:M,name:"buttonOneP",label:"first button path"})]}),i.jsxs(ei,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:1},children:[i.jsx(E,{id:n.id,onChange:M,name:"buttonTowT",label:"second button text"}),i.jsx(E,{id:n.id,onChange:M,name:"buttonTowP",label:"second button path"})]}),i.jsxs(f,{spacing:1.5,children:[i.jsx(x,{variant:"subtitle2",children:"Image"}),i.jsx(Gi,{name:"img",maxSize:3145728,onDrop:e=>{Q(e,n,"img"),J(e)},onDelete:e=>{Q(null,n,"img"),X(e)},file:B.img||U})]}),i.jsx(di,{id:n.id,variant:"outlined",sx:{color:"#FFFFFF",backgroundColor:"#b1a9a9","&:hover":{backgroundColor:"#b1a9a9",color:"red"}},startIcon:i.jsx(Ji,{}),onClick:Y,children:"Remove"})]})})};hi.propTypes={apps:R.array.isRequired,app:R.object.isRequired,appsDispatch:R.func.isRequired,setAllValue:R.func.isRequired,listName:R.string.isRequired};const Z=({apps:s,appsDispatch:n,setAllValue:p,listName:L})=>{const k=()=>{p(L,[...s,{id:s==null?void 0:s.length}]),n({type:"add",id:s==null?void 0:s.length})};return i.jsxs(i.Fragment,{children:[s==null?void 0:s.map(U=>i.jsx(hi,{id:U.id,app:U,apps:s,appsDispatch:n,setAllValue:p,listName:L},U.id)),i.jsx(di,{variant:"outlined",sx:{color:"#fff",backgroundColor:"#212B36","&:hover":{backgroundColor:"#454F5B"}},startIcon:i.jsx(Xi,{}),onClick:k,children:"إضافة طلب جديد"})]})};Z.propTypes={apps:R.array.isRequired,appsDispatch:R.func.isRequired,setAllValue:R.func.isRequired,listName:R.string.isRequired};function Ei({currentThree:s}){var J,X,Y;const n=Pi(),p=Bi("up","md"),{enqueueSnackbar:L}=Hi(),k=((J=s==null?void 0:s.lang)==null?void 0:J.ar.apps)||[],U=((X=s==null?void 0:s.lang)==null?void 0:X.en.apps)||[],K=((Y=s==null?void 0:s.lang)==null?void 0:Y.cr.apps)||[],[v,T]=w.useReducer(zi,k),[ii,li]=w.useReducer(Ki,U),[si,ti]=w.useReducer(Qi,K),z=Li().shape({titleOne_ar:l().min(3).max(50).required("الجزء الأول من العنوان مطلوب باللغة العربية"),titleOne_en:l().min(3).max(50).required("English First section of title is required"),titleOne_cr:l().min(3).max(50).required("kurd First section of title is required"),span_ar:l().min(3).max(50).required("الكلمة المميزة مطلوبة بالعربية"),span_en:l().min(3).max(50).required("English Special Word is required"),span_cr:l().min(3).max(50).required("kurd Special Word is required"),titleTow_ar:l().min(3).max(50).required("الجزء الثاني من العنوان مطلوب باللغة العربية"),titleTow_en:l().min(3).max(50).required("English Second section of title is required"),titleTow_cr:l().min(3).max(50).required("kurd Second section of title is required"),descriptionOne_ar:l().min(10).max(5e3).required("الوصف الأول مطلوب باللغة العربية"),descriptionOne_en:l().min(10).max(5e3).required("English Firs Description is required"),descriptionOne_cr:l().min(10).max(5e3).required("kurd Firs Description is required"),descriptionTow_ar:l().min(10).max(5e3).required("الوصف الثاني مطلوب باللغة العربية"),descriptionTow_en:l().min(10).max(5e3).required("English second Description is required"),descriptionTow_cr:l().min(10).max(5e3).required("kurd second Description is required"),appsList_ar:ai().min(1).max(5).required("Apps List مطلوب باللغة العربية"),appsList_en:ai().min(1).max(5).required("English Apps List"),appsList_cr:ai().min(1).max(5).required("Kurd Apps List")}),G=w.useMemo(()=>{var e,a,o,d,r,m,u,c,_,y,q,O,F,C,A,S,I,h,ri,xi,pi,gi,bi,ji,wi,fi,ui,_i,yi,qi,Oi,Fi,Ci,Ai,Si,Ri;return{titleOne_ar:((a=(e=s==null?void 0:s.lang)==null?void 0:e.ar)==null?void 0:a.titleOne)||"",titleOne_en:((d=(o=s==null?void 0:s.lang)==null?void 0:o.en)==null?void 0:d.titleOne)||"",titleOne_cr:((m=(r=s==null?void 0:s.lang)==null?void 0:r.cr)==null?void 0:m.titleOne)||"",titleTow_ar:((c=(u=s==null?void 0:s.lang)==null?void 0:u.ar)==null?void 0:c.titleTow)||"",titleTow_en:((y=(_=s==null?void 0:s.lang)==null?void 0:_.en)==null?void 0:y.titleTow)||"",titleTow_cr:((O=(q=s==null?void 0:s.lang)==null?void 0:q.cr)==null?void 0:O.titleTow)||"",span_ar:((C=(F=s==null?void 0:s.lang)==null?void 0:F.ar)==null?void 0:C.span)||"",span_en:((S=(A=s==null?void 0:s.lang)==null?void 0:A.en)==null?void 0:S.span)||"",span_cr:((h=(I=s==null?void 0:s.lang)==null?void 0:I.cr)==null?void 0:h.span)||"",descriptionOne_ar:((xi=(ri=s==null?void 0:s.lang)==null?void 0:ri.ar)==null?void 0:xi.descOne)||"",descriptionOne_en:((gi=(pi=s==null?void 0:s.lang)==null?void 0:pi.en)==null?void 0:gi.descOne)||"",descriptionOne_cr:((ji=(bi=s==null?void 0:s.lang)==null?void 0:bi.cr)==null?void 0:ji.descOne)||"",descriptionTow_ar:((fi=(wi=s==null?void 0:s.lang)==null?void 0:wi.ar)==null?void 0:fi.descTow)||"",descriptionTow_en:((_i=(ui=s==null?void 0:s.lang)==null?void 0:ui.en)==null?void 0:_i.descTow)||"",descriptionTow_cr:((qi=(yi=s==null?void 0:s.lang)==null?void 0:yi.cr)==null?void 0:qi.descTow)||"",appsList_ar:((Fi=(Oi=s==null?void 0:s.lang)==null?void 0:Oi.ar)==null?void 0:Fi.apps)||"",appsList_en:((Ai=(Ci=s==null?void 0:s.lang)==null?void 0:Ci.en)==null?void 0:Ai.apps)||"",appsList_cr:((Ri=(Si=s==null?void 0:s.lang)==null?void 0:Si.cr)==null?void 0:Ri.apps)||""}},[s]),j=ki({resolver:async(e,a,o)=>await Ii(z)(e,a,o),defaultValues:G}),{reset:H,watch:P,setValue:D,handleSubmit:ci,formState:{isSubmitting:mi,isValid:B}}=j,t=P();w.useEffect(()=>{s&&H(G)},[s,G,H]);const V=ci(async e=>{var a,o;try{const d=await Promise.all(t==null?void 0:t.appsList_ar.map(async(c,_)=>{var y,q,O,F,C,A;if(typeof c.img=="object"){(O=(q=(y=s==null?void 0:s.lang)==null?void 0:y.ar)==null?void 0:q.apps[_])!=null&&O.img&&await N.post("/deleteFile",{fileUrl:(A=(C=(F=s==null?void 0:s.lang)==null?void 0:F.ar)==null?void 0:C.apps[_])==null?void 0:A.img});const S=new FormData;if(c.img){S.append("file",c.img);const I=await N.post("/uploadFile/modular",S,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:h}=I.data.data;c.img=h}}return c})),r=await Promise.all(t==null?void 0:t.appsList_en.map(async(c,_)=>{var y,q,O,F,C,A;if(typeof c.img=="object"){(O=(q=(y=s==null?void 0:s.lang)==null?void 0:y.en)==null?void 0:q.apps[_])!=null&&O.img&&await N.post("/deleteFile",{fileUrl:(A=(C=(F=s==null?void 0:s.lang)==null?void 0:F.en)==null?void 0:C.apps[_])==null?void 0:A.img});const S=new FormData;if(c.img){S.append("file",c.img);const I=await N.post("/uploadFile/modular",S,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:h}=I.data.data;c.img=h}}return c})),m=await Promise.all(t==null?void 0:t.appsList_cr.map(async(c,_)=>{var y,q,O,F,C,A;if(typeof c.img=="object"){(O=(q=(y=s==null?void 0:s.lang)==null?void 0:y.cr)==null?void 0:q.apps[_])!=null&&O.img&&await N.post("/deleteFile",{fileUrl:(A=(C=(F=s==null?void 0:s.lang)==null?void 0:F.cr)==null?void 0:C.apps[_])==null?void 0:A.img});const S=new FormData;if(c.img){S.append("file",c.img);const I=await N.post("/uploadFile/modular",S,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:h}=I.data.data;c.img=h}}return c}));await D("appsList_ar",d),await D("appsList_en",r),await D("appsList_cr",m);const u={lang:{ar:{titleOne:t==null?void 0:t.titleOne_ar,titleTow:t==null?void 0:t.titleTow_ar,span:t==null?void 0:t.span_ar,descOne:t==null?void 0:t.descriptionOne_ar,descTow:t==null?void 0:t.descriptionTow_ar,apps:t.appsList_ar},en:{titleOne:t==null?void 0:t.titleOne_en,titleTow:t==null?void 0:t.titleTow_en,span:t==null?void 0:t.span_en,descOne:t==null?void 0:t.descriptionOne_ar,descTow:t==null?void 0:t.descriptionTow_ar,apps:t.appsList_en},cr:{titleOne:t==null?void 0:t.titleOne_cr,titleTow:t==null?void 0:t.titleTow_cr,span:t==null?void 0:t.span_cr,descOne:t==null?void 0:t.descriptionOne_cr,descTow:t==null?void 0:t.descriptionTow_cr,apps:t.appsList_cr}}};await N.put("/edit/modular",u),H(),L("Update success!"),window.location.reload(),ni.success("Apps's Updated Successfully.")}catch(d){ni.error(((o=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:o.msg)||"Something went wrong!"),console.error(d)}}),M=i.jsx(i.Fragment,{children:i.jsxs(ei,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",p:2},children:[i.jsx(di,{color:"inherit",variant:"outlined",size:"large",onClick:()=>{H(),n.push(oi.dashboard.root)},children:"cancel"}),i.jsx(Yi,{type:"submit",variant:"contained",size:"large",loading:mi,sx:{ml:2},onClick:async()=>{var e,a;await V(),(e=j==null?void 0:j.formState)!=null&&e.errors&&Object.keys((a=j==null?void 0:j.formState)==null?void 0:a.errors).map(d=>{var r;ni.error((r=j==null?void 0:j.formState)==null?void 0:r.errors[d].message)})},children:"Save Modular"})]})}),Q=i.jsxs(i.Fragment,{children:[p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsxs(W,{children:[i.jsx($,{title:"Arabic Text"}),i.jsxs(f,{spacing:3,sx:{p:3},children:[i.jsx(g,{name:"titleOne_ar",label:"الجزء الأول من العنوان بالعربية",sx:{direction:"rtl"}}),i.jsx(g,{name:"span_ar",label:"الكلمة المميزة بالعربية",sx:{direction:"rtl"}}),i.jsx(g,{name:"titleTow_ar",label:"الجزء الثاني من العنوان بالعربية",sx:{direction:"rtl"}}),i.jsx(g,{type:"text",name:"descriptionOne_ar",label:"الوصف الأول بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}}),i.jsx(g,{type:"text",name:"descriptionTow_ar",label:"الوصف الثاني بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}})]})]})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsxs(W,{children:[i.jsx($,{title:"Arabic Apps List"}),i.jsx(f,{spacing:3,sx:{p:0},children:i.jsx(f,{spacing:0,sx:{p:0},children:i.jsx(Z,{setAllValue:D,apps:v,appsDispatch:T,listName:"appsList_ar"})})})]})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsx(W,{children:i.jsxs(f,{spacing:3,sx:{p:0},children:[i.jsx($,{title:"English Text"}),i.jsx(g,{name:"titleOne_en",label:"English First section of title"}),i.jsx(g,{name:"span_en",label:"english Special Word"}),i.jsx(g,{name:"titleTow_en",label:"English Second section of title"}),i.jsx(g,{type:"text",name:"descriptionOne_en",label:"English First description",multiline:!0,rows:3}),i.jsx(g,{type:"text",name:"descriptionTow_en",label:"English Second description",multiline:!0,rows:3})]})})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsx(W,{children:i.jsxs(f,{spacing:3,sx:{p:0},children:[i.jsx($,{title:"English Apps List"}),i.jsxs(f,{spacing:0,sx:{p:3},children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps"}),i.jsx(Z,{setAllValue:D,apps:ii,appsDispatch:li,listName:"appsList_en"})]})]})})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsx(W,{children:i.jsxs(f,{spacing:3,sx:{p:0},children:[i.jsx($,{title:"Kurd Text"}),i.jsx(g,{name:"titleOne_cr",label:"kurd First section of title"}),i.jsx(g,{name:"span_cr",label:"kurd Special Word"}),i.jsx(g,{name:"titleTow_cr",label:"kurd Second section of title"}),i.jsx(g,{type:"text",name:"descriptionOne_cr",label:"kurd First description",multiline:!0,rows:3}),i.jsx(g,{type:"text",name:"descriptionTow_cr",label:"kurd Second description",multiline:!0,rows:3})]})})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsx(W,{children:i.jsxs(f,{spacing:3,sx:{p:0},children:[i.jsx($,{title:"Kurd Apps List"}),i.jsxs(f,{spacing:0,sx:{p:3},children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps"}),i.jsx(Z,{setAllValue:D,apps:si,appsDispatch:ti,listName:"appsList_cr"})]})]})})}),p&&i.jsxs(b,{md:4,children:[i.jsx(x,{variant:"h6",sx:{mb:.5},children:"Actions"}),i.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Save Modular, cancel..."})]}),i.jsx(b,{xs:12,md:8,children:i.jsx(W,{children:i.jsxs(f,{spacing:3,sx:{p:0},children:[i.jsx($,{title:"Actions"}),M]})})})]});return i.jsx(Di,{methods:j,onSubmit:V,children:i.jsx(b,{container:!0,spacing:3,children:Q})})}Ei.propTypes={currentThree:R.object};function Zi(){const s=Vi(),{three:n}=Wi();return i.jsxs(Ni,{maxWidth:s.themeStretch?!1:"lg",children:[i.jsx(Mi,{heading:"Edit Three Section",links:[{name:"Dashboard",href:oi.dashboard.root},{name:"section three",href:oi.dashboard.edit.three}],sx:{mb:{xs:3,md:5}}}),n&&i.jsx(Ei,{currentThree:n})]})}function ms(){return i.jsxs(i.Fragment,{children:[i.jsx($i,{children:i.jsx("title",{children:" Dashboard: Platform Edit"})}),i.jsx(Zi,{})]})}export{ms as default};
