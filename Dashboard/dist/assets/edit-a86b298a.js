import{bD as fn,I as L,be as _n,b2 as bn,b6 as jn,bg as A,bh as $i,a9 as n,ae as S,b3 as K,bE as Sn,ag as Tn,bj as I,a$ as Oi,b8 as yn,am as wn,ai as un}from"./index-7baedad1.js";import{u as Cn}from"./blog-ab74bd07.js";import{u as qn,c as Fn,a as m,e as X,d as Pn,g as zi,F as vn,R as r,C as En}from"./form-provider-f0797274.js";import{G as k,o as Nn,C as P}from"./yup-573c9287.js";import{L as Y}from"./LinksBox-37809bf3.js";import{C as Z}from"./numeral-64476a1d.js";import{L as Dn}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";function Rn(){const i=fn();return L.useMemo(()=>i,[i])}function Wi({currentHeader:i}){var ai,oi,hi,di,xi,Li;const[B,Ki]=L.useState(!1),[Mi,Qi]=L.useState(!1),[v,E]=L.useState([]),[N,D]=L.useState([]),[R,U]=L.useState([]),[T,V]=L.useState(""),[y,$]=L.useState(""),[w,z]=L.useState(""),[u,O]=L.useState(""),[C,W]=L.useState(""),[q,G]=L.useState(""),[Ji,H]=L.useState(null),[Xi,ii]=L.useState(null),[f,ni]=L.useState(""),[_,si]=L.useState(""),[b,ei]=L.useState(""),Yi=_n(),F=bn("up","md"),{enqueueSnackbar:Zi}=qn(),Ii=jn(),Hi=Fn().shape({logo:m().max(500).required("Logo is required"),smallLogo:m().max(500).required("Small Logo is required"),whatsNumber:m().min(7).max(500).required("Whatsapp Number is required"),headLineText_ar:m().min(4).max(500).required("نص الشريط العلوي مطلوب بالعربية"),headLineText_en:m().min(4).max(500).required("English headLineText_en is required"),headLineText_cr:m().min(4).max(500).required("krdy headLineText_en is required"),headLineLinkT_ar:m().min(4).max(100).required("نص رابط الانتقال مطلوب باللغة العربية"),headLineLinkT_en:m().min(4).max(100).required("English headLine links text is required"),headLineLinkT_cr:m().min(4).max(100).required("kurd headLine links text  is required"),headLineLink_ar:m().min(4).max(100).required("رابط الانتقال مطلوب باللغة العربية"),headLineLink_en:m().min(4).max(100).required("English headLine link is required"),headLineLink_cr:m().min(4).max(100).required("kurd headLine link is required"),list_ar:X().min(1).required("nav bar links is required"),list_en:X().min(1).required("nav bar links is required"),list_cr:X().min(1).required("nav bar links is required")}),M=L.useMemo(()=>{var t,s,e,o,x,h,d,l,g,c,p,ci,gi,pi,mi,ri,ki,fi,_i,bi,ji,Si,Ti,yi,wi,ui,Ci,qi,Fi,Pi,vi,Ei,Ni,Di,Ri,Ui,Ai,Bi,Vi;return{logo:(i==null?void 0:i.logo)||"",smallLogo:(i==null?void 0:i.smallLogo)||"",whatsNumber:(i==null?void 0:i.whatsNumber)||"",headLineText_ar:((e=(s=(t=i==null?void 0:i.lang)==null?void 0:t.ar)==null?void 0:s.headLine)==null?void 0:e.text)||"",headLineText_en:((h=(x=(o=i==null?void 0:i.lang)==null?void 0:o.en)==null?void 0:x.headLine)==null?void 0:h.text)||"",headLineText_cr:((g=(l=(d=i==null?void 0:i.lang)==null?void 0:d.cr)==null?void 0:l.headLine)==null?void 0:g.text)||"",headLineLinkT_ar:((gi=(ci=(p=(c=i==null?void 0:i.lang)==null?void 0:c.ar)==null?void 0:p.headLine)==null?void 0:ci.link)==null?void 0:gi.text)||"",headLineLinkT_en:((ki=(ri=(mi=(pi=i==null?void 0:i.lang)==null?void 0:pi.en)==null?void 0:mi.headLine)==null?void 0:ri.link)==null?void 0:ki.text)||"",headLineLinkT_cr:((ji=(bi=(_i=(fi=i==null?void 0:i.lang)==null?void 0:fi.cr)==null?void 0:_i.headLine)==null?void 0:bi.link)==null?void 0:ji.text)||"",headLineLink_ar:((wi=(yi=(Ti=(Si=i==null?void 0:i.lang)==null?void 0:Si.ar)==null?void 0:Ti.headLine)==null?void 0:yi.link)==null?void 0:wi.link)||"",headLineLink_en:((Fi=(qi=(Ci=(ui=i==null?void 0:i.lang)==null?void 0:ui.en)==null?void 0:Ci.headLine)==null?void 0:qi.link)==null?void 0:Fi.link)||"",headLineLink_cr:((Ni=(Ei=(vi=(Pi=i==null?void 0:i.lang)==null?void 0:Pi.cr)==null?void 0:vi.headLine)==null?void 0:Ei.link)==null?void 0:Ni.link)||"",list_ar:(Ri=(Di=i==null?void 0:i.lang)==null?void 0:Di.ar)==null?void 0:Ri.list,list_en:((Ai=(Ui=i==null?void 0:i.lang)==null?void 0:Ui.en)==null?void 0:Ai.list)||"",list_cr:((Vi=(Bi=i==null?void 0:i.lang)==null?void 0:Bi.cr)==null?void 0:Vi.list)||""}},[i]),ti=Pn({resolver:async(t,s,e)=>await Nn(Hi)(t,s,e),defaultValues:M}),{reset:Q,watch:nn,setValue:j,handleSubmit:li,formState:{isSubmitting:sn,isValid:Un}}=ti,a=nn();L.useEffect(()=>{i&&Q(M)},[i,M,Q]);const en=li(async t=>{var s,e,o,x;try{let h="",d="";if(B&&(i.logo&&await A.post("/deleteFile",{fileUrl:i.logo}),a.logo)){const g=new FormData;g.append("file",a.logo);const c=await A.post("/uploadFile/header",g,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:p}=(s=c==null?void 0:c.data)==null?void 0:s.data;h=p}if(Mi&&(i.smallLogo&&await A.post("/deleteFile",{fileUrl:i.smallLogo}),a.smallLogo)){const g=new FormData;g.append("file",a.smallLogo);const c=await A.post("/uploadFile/header",g,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:p}=(e=c==null?void 0:c.data)==null?void 0:e.data;d=p}const l={logo:h||i.logo,smallLogo:d||i.smallLogo,whatsNumber:a.whatsNumber,lang:{ar:{list:v,headLine:{text:a==null?void 0:a.headLineText_ar,link:{text:a==null?void 0:a.headLineLinkT_ar,link:a==null?void 0:a.headLineLink_ar}}},en:{list:N,headLine:{text:a==null?void 0:a.headLineText_en,link:{text:a==null?void 0:a.headLineLinkT_en,link:a==null?void 0:a.headLineLink_en}}},cr:{list:R,headLine:{text:a==null?void 0:a.headLineText_cr,link:{text:a==null?void 0:a.headLineLinkT_cr,link:a==null?void 0:a.headLineLink_cr}}}}};await A.put("/edit/header",l),Q(),Ii.onFalse(),Zi("Update success!"),$i.success("Headers Updated successfully"),window.location.reload()}catch(h){$i.error(((x=(o=h==null?void 0:h.response)==null?void 0:o.data)==null?void 0:x.msg)||"Something went wrong!"),console.error(h)}}),tn=L.useCallback(t=>{const s=t[0];Ki(!0);const e=Object.assign(s,{preview:URL.createObjectURL(s)});H(e),s&&j("logo",e,{shouldValidate:!0})},[j]),ln=L.useCallback(t=>{const s=t[0];Qi(!0);const e=Object.assign(s,{preview:URL.createObjectURL(s)});ii(e),s&&j("smallLogo",e,{shouldValidate:!0})},[j]);L.useEffect(()=>{var t,s,e,o,x,h;E((s=(t=i==null?void 0:i.lang)==null?void 0:t.ar)==null?void 0:s.list),D((o=(e=i==null?void 0:i.lang)==null?void 0:e.en)==null?void 0:o.list),U((h=(x=i==null?void 0:i.lang)==null?void 0:x.cr)==null?void 0:h.list)},[(oi=(ai=i==null?void 0:i.lang)==null?void 0:ai.ar)==null?void 0:oi.list,(di=(hi=i==null?void 0:i.lang)==null?void 0:hi.en)==null?void 0:di.list,(Li=(xi=i==null?void 0:i.lang)==null?void 0:xi.cr)==null?void 0:Li.list]);const an=L.useCallback(()=>{j("logo",null),H(null)},[j]),on=L.useCallback(()=>{j("smallLogo",null),ii(null)},[j]),hn=()=>{if(T&&y){if(!String(f))E([...v,{title:T,path:y}]),V(""),$("");else if(typeof f=="string"){const t=f==null?void 0:f.split("_"),s=v.map((e,o)=>{var x,h;if(t[0]==o)if(((x=e==null?void 0:e.children)==null?void 0:x.length)>0){const d=(e==null?void 0:e.children[0])||{items:[]};d.items=(h=d==null?void 0:d.items)==null?void 0:h.map((l,g)=>{var c;if(t[1]==g){const p=((c=l==null?void 0:l.children)==null?void 0:c.length)>0?l==null?void 0:l.children[0]:{items:[]};return{...l,children:[{...p,items:[...p.items,{title:T,path:y}]}]}}return l})}else{const d=[{items:[]}];return{...e,children:[{...d,items:[...d.items,{title:T,path:y}]}]}}return e});E(s),V(""),$("")}else if(typeof f=="number"){const t=v.map((s,e)=>{var o;if(f==e){const x=((o=s==null?void 0:s.children)==null?void 0:o.length)>0?s==null?void 0:s.children[0]:{items:[]};return{...s,children:[{...x,items:[...x.items,{title:T,path:y}]}]}}return s});E(t),V(""),$("")}}ni("")},dn=()=>{if(w&&u){if(!String(_))D([...N,{title:w,path:u}]),z(""),O("");else if(typeof _=="string"){const t=_==null?void 0:_.split("_"),s=N.map((e,o)=>{var x,h;if(t[0]==o)if(((x=e==null?void 0:e.children)==null?void 0:x.length)>0){const d=(e==null?void 0:e.children[0])||{items:[]};d.items=(h=d==null?void 0:d.items)==null?void 0:h.map((l,g)=>{var c;if(t[1]==g){const p=((c=l==null?void 0:l.children)==null?void 0:c.length)>0?l==null?void 0:l.children[0]:{items:[]};return{...l,children:[{...p,items:[...p.items,{title:w,path:u}]}]}}return l})}else{const d=[{items:[]}];return{...e,children:[{...d,items:[...d.items,{title:w,path:u}]}]}}return e});D(s),z(""),O("")}else if(typeof _=="number"){const t=N.map((s,e)=>{var o;if(_==e){const x=((o=s==null?void 0:s.children)==null?void 0:o.length)>0?s==null?void 0:s.children[0]:{items:[]};return{...s,children:[{...x,items:[...x.items,{title:w,path:u}]}]}}return s});D(t),z(""),O("")}}si("")},xn=()=>{if(C&&q){if(!String(b))U([...R,{title:C,path:q}]),W(""),G("");else if(typeof b=="string"){const t=b==null?void 0:b.split("_"),s=R.map((e,o)=>{var x,h;if(t[0]==o)if(((x=e==null?void 0:e.children)==null?void 0:x.length)>0){const d=(e==null?void 0:e.children[0])||{items:[]};d.items=(h=d==null?void 0:d.items)==null?void 0:h.map((l,g)=>{var c;if(t[1]==g){const p=((c=l==null?void 0:l.children)==null?void 0:c.length)>0?l==null?void 0:l.children[0]:{items:[]};return{...l,children:[{...p,items:[...p.items,{title:C,path:q}]}]}}return l})}else{const d=[{items:[]}];return{...e,children:[{...d,items:[...d.items,{title:C,path:q}]}]}}return e});U(s),W(""),G("")}else if(typeof b=="number"){const t=R.map((s,e)=>{var o;if(b==e){const x=((o=s==null?void 0:s.children)==null?void 0:o.length)>0?s==null?void 0:s.children[0]:{items:[]};return{...s,children:[{...x,items:[...x.items,{title:C,path:q}]}]}}return s});U(t),W(""),G("")}}ei("")},Ln=t=>{t.target.name==="title"?V(t.target.value):$(t.target.value)},cn=t=>{t.target.name==="title"?z(t.target.value):O(t.target.value)},gn=t=>{t.target.name==="title"?W(t.target.value):G(t.target.value)},J=(t,s,e)=>{if(typeof s=="number")t(o=>o.filter((x,h)=>h!==s));else if(typeof s=="string"){const o=s.split("_");if(o.length>=3){const x=e.map((h,d)=>{if(o[0]==d){const l=h.children[0].items[Number(o[1])].children[0].items.filter((g,c)=>o[2]!=c);return h.children[0].items[Number(o[1])].children[0].items=l,h}return h});t(x)}else{const x=e.map((h,d)=>{if(o[0]==d){const l=h.children[0].items.filter((g,c)=>o[1]!=c);return h.children[0].items=l,h}return h});t(x)}}},pn=n.jsxs(n.Fragment,{children:[F&&n.jsxs(k,{md:4,children:[n.jsx(S,{variant:"h6",sx:{mb:.5},children:"HeadLine"}),n.jsx(S,{variant:"body2",sx:{color:"text.secondary"},children:"HeadLine Text, link text,..."})]}),n.jsx(k,{xs:12,md:8,children:n.jsxs(Z,{children:[!F&&n.jsx(P,{title:"HeadLine"}),n.jsx(P,{title:"Arabic Text"}),n.jsxs(K,{spacing:3,sx:{p:3},children:[n.jsx(r,{name:"headLineText_ar",label:"نص الشريط العلوي بالعربية",sx:{direction:"rtl"}}),n.jsx(r,{type:"text",name:"headLineLinkT_ar",label:"نص رابط الانتقال باللغة العربية",sx:{direction:"rtl"}}),n.jsx(r,{type:"text",name:"headLineLink_ar",label:"رابط الانتقال باللغة العربية"}),n.jsx(P,{title:"English Text"}),n.jsx(r,{type:"text",name:"headLineText_en",label:"English headLine text"}),n.jsx(r,{type:"text",name:"headLineLinkT_en",label:"English headLine links text"}),n.jsx(r,{type:"text",name:"headLineLink_en",label:"English headLine link"}),n.jsx(P,{title:"Kurd Text"}),n.jsx(r,{type:"text",name:"headLineText_cr",label:"krdy headLine tex"}),n.jsx(r,{type:"text",name:"headLineLinkT_cr",label:"kurd headLine links text"}),n.jsx(r,{type:"text",name:"headLineLink_cr",label:"'kurd headLine link"}),n.jsx(P,{title:"Numbers"}),n.jsx(r,{type:"text",name:"whatsNumber",label:"'Whatsapp Number"})]})]})})]}),mn=n.jsxs(n.Fragment,{children:[F&&n.jsxs(k,{md:4,children:[n.jsx(S,{variant:"h6",sx:{mb:.5},children:"Logo"}),n.jsx(S,{variant:"body2",sx:{color:"text.secondary"},children:"Select or Drop Logo image..."})]}),n.jsx(k,{xs:12,md:8,children:n.jsxs(Z,{children:[n.jsxs(K,{spacing:1.5,sx:{p:2},children:[n.jsx(S,{variant:"subtitle2",children:"Logo"}),i&&n.jsx(zi,{name:"logo",maxSize:3145728,onDrop:tn,onDelete:an,file:a.logo||Ji})]}),n.jsxs(K,{spacing:1.5,sx:{p:2},children:[n.jsx(S,{variant:"subtitle2",children:"Small Logo"}),i&&n.jsx(zi,{name:"smallLogo",maxSize:3145728,onDrop:ln,onDelete:on,file:a.smallLogo||Xi})]})]})})]}),rn=n.jsxs(n.Fragment,{children:[F&&n.jsx(k,{md:4}),n.jsxs(k,{xs:12,md:8,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx(Tn,{color:"inherit",variant:"outlined",size:"large",onClick:()=>Yi.push(I.dashboard.root),children:"cancel"}),n.jsx(Dn,{type:"submit",variant:"contained",size:"large",loading:sn,sx:{ml:2},onClick:li,children:"Save Header"})]})]}),kn=n.jsxs(n.Fragment,{children:[F&&n.jsxs(k,{md:4,children:[n.jsx(S,{variant:"h6",sx:{mb:.5},children:"NavBar Links"}),n.jsx(S,{variant:"body2",sx:{color:"text.secondary"},children:"Nav Links Text, Nav Links Paths..."})]}),n.jsx(k,{xs:12,md:8,children:n.jsxs(Z,{children:[!F&&n.jsx(P,{title:"NavBar Links"}),n.jsxs(K,{spacing:3,sx:{p:3},children:[n.jsx(Y,{title:"Arabic",list:v,setList:E,handleDeleteItem:J,linkTitle:T,linkPath:y,handleChangeLink:Ln,handleAddItem:hn,setParent:ni,parent:f,type:"header"}),n.jsx(Y,{title:"English",list:N,setList:D,handleDeleteItem:J,linkTitle:w,linkPath:u,handleChangeLink:cn,handleAddItem:dn,setParent:si,parent:_,type:"header"}),n.jsx(Y,{title:"Kurd",list:R,setList:U,handleDeleteItem:J,linkTitle:C,linkPath:q,handleChangeLink:gn,handleAddItem:xn,setParent:ei,parent:b,type:"header"})]})]})})]});return n.jsx(vn,{methods:ti,onSubmit:en,children:n.jsxs(k,{container:!0,spacing:3,children:[pn,mn,kn,rn,n.jsx(Sn,{})]})})}Wi.propTypes={currentHeader:Oi.object};function Gi(){const i=yn(),{header:B}=Cn();return n.jsxs(wn,{maxWidth:i.themeStretch?!1:"lg",children:[n.jsx(En,{heading:"Edit Header Section",links:[{name:"Dashboard",href:I.dashboard.root},{name:"header",href:I.dashboard.edit.header}],sx:{mb:{xs:3,md:5}}}),B&&n.jsx(Wi,{currentHeader:B})]})}Gi.propTypes={id:Oi.string};function Mn(){return Rn(),n.jsxs(n.Fragment,{children:[n.jsx(un,{children:n.jsx("title",{children:" Dashboard: Header Edit"})}),n.jsx(Gi,{})]})}export{Mn as default};
