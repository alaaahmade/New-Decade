import{I as b,be as ht,b2 as dt,bg as c,bh as X,a9 as e,ae as w,b3 as q,ag as ct,bj as S,a$ as Ot,b8 as _t,am as jt,ai as ft}from"./index-7baedad1.js";import{f as It}from"./blog-ab74bd07.js";import{u as qt,c as St,a as i,d as Ft,g as Y,F as kt,R as n,C as Ct}from"./form-provider-f0797274.js";import{G as T,C as O,o as yt}from"./yup-573c9287.js";import{C as Z}from"./numeral-64476a1d.js";import{L as Bt}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";function g({currentAdvantage:t}){const[_,v]=b.useState(!1),[A,tt]=b.useState(!1),[et,F]=b.useState(null),[ot,k]=b.useState(null),st=ht(),h=dt("up","md"),{enqueueSnackbar:it}=qt(),nt=St().shape({titleOne_ar:i().min(3).max(50).required("العنوان الأول مطلوب باللغة العربية"),titleOne_en:i().min(3).max(50).required("English First title is required"),titleOne_cr:i().min(3).max(50).required("kurd First title is required"),titleTow_ar:i().min(3).max(50).required("العنوان الأول مطلوب باللغة العربية"),titleTow_en:i().min(3).max(50).required("English First title is required"),titleTow_cr:i().min(3).max(50).required("kurd First title is required"),span_ar:i().min(4).max(50).required("الكلمة المميزة مطلوبة بالعربية"),span_en:i().min(4).max(50).required("English Special Word is required"),span_cr:i().min(4).max(50).required("kurd Special Word is required"),buttonOneT_ar:i().min(4).max(50).required("نص المفتاح الأول مطلوب بالعربية"),buttonOneT_en:i().min(4).max(50).required("english firsts button text is required"),buttonOneT_cr:i().min(4).max(50).required("kurd firsts button text is required"),buttonOneI:i().min(4).max(100).required("english firsts button Image is required"),buttonTowT_ar:i().min(4).max(50).required("نص المفتاح الثاني مطلوب بالعربية"),buttonTowT_en:i().min(4).max(50).required("english Second button text is required"),buttonTowT_cr:i().min(4).max(50).required("kurd Second button text is required"),buttonTowI:i().min(4).max(100).required("english Second button Image is required")}),f=b.useMemo(()=>{var m,s,l,a,d,j,u,r,p,B,D,R,E,U,V,L,W,$,z,G,H,P,N,K,M,Q,J;return{titleOne_ar:((s=(m=t==null?void 0:t.lang)==null?void 0:m.ar)==null?void 0:s.titleOne)||"",titleOne_en:((a=(l=t==null?void 0:t.lang)==null?void 0:l.en)==null?void 0:a.titleOne)||"",titleOne_cr:((j=(d=t==null?void 0:t.lang)==null?void 0:d.cr)==null?void 0:j.titleOne)||"",titleTow_ar:((r=(u=t==null?void 0:t.lang)==null?void 0:u.ar)==null?void 0:r.titleTow)||"",titleTow_en:((B=(p=t==null?void 0:t.lang)==null?void 0:p.en)==null?void 0:B.titleTow)||"",titleTow_cr:((R=(D=t==null?void 0:t.lang)==null?void 0:D.cr)==null?void 0:R.titleTow)||"",span_ar:((E=t==null?void 0:t.lang)==null?void 0:E.ar.span)||"",span_en:((U=t==null?void 0:t.lang)==null?void 0:U.en.span)||"",span_cr:((V=t==null?void 0:t.lang)==null?void 0:V.cr.span)||"",buttonOneT_ar:((W=(L=t==null?void 0:t.lang)==null?void 0:L.ar)==null?void 0:W.buttonOne)||"",buttonOneT_en:((z=($=t==null?void 0:t.lang)==null?void 0:$.en)==null?void 0:z.buttonOne)||"",buttonOneT_cr:((H=(G=t==null?void 0:t.lang)==null?void 0:G.cr)==null?void 0:H.buttonOne)||"",buttonTowT_ar:((N=(P=t==null?void 0:t.lang)==null?void 0:P.ar)==null?void 0:N.buttonTow)||"",buttonTowT_en:((M=(K=t==null?void 0:t.lang)==null?void 0:K.en)==null?void 0:M.buttonTow)||"",buttonTowT_cr:((J=(Q=t==null?void 0:t.lang)==null?void 0:Q.cr)==null?void 0:J.buttonTow)||"",buttonOneI:(t==null?void 0:t.buttonOneI)||"",buttonTowI:(t==null?void 0:t.buttonTowI)||""}},[t]),C=Ft({resolver:async(m,s,l)=>await yt(nt)(m,s,l),defaultValues:f}),{reset:I,watch:lt,setValue:x,handleSubmit:at,formState:{isSubmitting:bt,isValid:Rt}}=C,o=lt();b.useEffect(()=>{t&&I(f)},[t,f,I]);const y=at(async m=>{var s,l;try{let a="",d="";if(_){t!=null&&t.buttonOneI&&await c.post("/deleteFile",{fileUrl:t.buttonOneI});const u=new FormData;if(o.buttonOneI){u.append("file",o.buttonOneI);const r=await c.post("/uploadFile/advantage",u,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:p}=r.data.data;a=p}}if(A){t!=null&&t.buttonTowI&&await c.post("/deleteFile",{fileUrl:t.buttonTowI});const u=new FormData;if(o.buttonTowI){u.append("file",o.buttonTowI);const r=await c.post("/uploadFile/advantage",u,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:p}=r.data.data;d=p}}const j={buttonOneI:a||(t==null?void 0:t.buttonOneI),buttonTowI:d||(t==null?void 0:t.buttonTowI),lang:{ar:{titleOne:o.titleOne_ar,span:o.span_ar,titleTow:o.titleTow_ar,buttonOne:o.buttonOneT_ar,buttonTow:o.buttonTowT_ar},en:{titleOne:o.titleOne_en,span:o.span_en,titleTow:o.titleTow_en,buttonOne:o.buttonOneT_en,buttonTow:o.buttonTowT_en},cr:{titleOne:o.titleOne_cr,span:o.span_cr,titleTow:o.titleTow_cr,buttonOne:o.buttonOneT_cr,buttonTow:o.buttonTowT_cr}}};await c.put("/edit/advantage",j),I(),it("Update success!"),X.success("about's Updated Successfully.")}catch(a){X.error(((l=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:l.msg)||"Something went wrong!"),console.error(a)}}),mt=b.useCallback(m=>{const s=m[0];v(!0);const l=Object.assign(s,{preview:URL.createObjectURL(s)});F(s),s&&x("buttonOneI",l,{shouldValidate:!0})},[x]),xt=b.useCallback(()=>{x("buttonOneI",null),F(null)},[x]),ut=b.useCallback(m=>{const s=m[0];tt(!0);const l=Object.assign(s,{preview:URL.createObjectURL(s)});k(s),s&&x("buttonTowI",l,{shouldValidate:!0})},[x]),Tt=b.useCallback(()=>{x("buttonTowI",null),k(null)},[x]),rt=e.jsxs(e.Fragment,{children:[h&&e.jsxs(T,{md:4,children:[e.jsx(w,{variant:"h6",sx:{mb:.5},children:"Texts"}),e.jsx(w,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),e.jsx(T,{xs:12,md:8,children:e.jsxs(Z,{children:[!h&&e.jsx(O,{title:"Texts"}),e.jsx(O,{title:"Arabic Text"}),e.jsxs(q,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"titleOne_ar",label:"العنوان الأول بالعربية",sx:{direction:"rtl"}}),e.jsx(n,{name:"span_ar",label:"الكلمة المميزة بالعربية",sx:{direction:"rtl"}}),e.jsx(n,{name:"titleTow_ar",label:"العنوان الثاني بالعربية",sx:{direction:"rtl"}}),e.jsx(n,{name:"buttonOneT_ar",label:"نص المفتاح الأول بالعربية",sx:{direction:"rtl"}}),e.jsx(n,{name:"buttonTowT_ar",label:"نص المفتاح الثاني بالعربية",sx:{direction:"rtl"}}),e.jsx(O,{title:"English Text"}),e.jsx(n,{name:"titleOne_en",label:"english firs section of title"}),e.jsx(n,{name:"span_en",label:"english Special Word"}),e.jsx(n,{name:"titleTow_en",label:"english second section of title"}),e.jsx(n,{name:"buttonOneT_en",label:"english firsts button text"}),e.jsx(n,{name:"buttonTowT_en",label:"english seconds button text"}),e.jsx(O,{title:"Kurd Text"}),e.jsx(n,{name:"titleOne_cr",label:"kurd first section of title"}),e.jsx(n,{name:"span_cr",label:"kurd Special Word"}),e.jsx(n,{name:"titleTow_cr",label:"kurd second section of title"}),e.jsx(n,{name:"buttonOneT_cr",label:"kurd firsts button text"}),e.jsx(n,{name:"buttonTowT_cr",label:"kurd seconds button text"})]})]})})]}),pt=e.jsxs(e.Fragment,{children:[h&&e.jsx(T,{md:4}),e.jsxs(T,{xs:12,md:8,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(ct,{color:"inherit",variant:"outlined",size:"large",onClick:()=>st.push(S.dashboard.root),children:"cancel"}),e.jsx(Bt,{type:"submit",variant:"contained",size:"large",loading:bt,sx:{ml:2},onClick:y,children:"Save Advantage"})]})]}),wt=e.jsxs(e.Fragment,{children:[h&&e.jsxs(T,{md:4,children:[e.jsx(w,{variant:"h6",sx:{mb:.5},children:"Images"}),e.jsx(w,{variant:"body2",sx:{color:"text.secondary"},children:"Advantage Section Image..."})]}),e.jsx(T,{xs:12,md:8,children:e.jsxs(Z,{sx:{p:2},children:[!h&&e.jsx(O,{title:"Images"}),e.jsxs(q,{spacing:1.5,sx:{m:2},children:[e.jsx(w,{variant:"subtitle2",children:`"${o==null?void 0:o.buttonOneT_en} "button One Image`}),e.jsx(Y,{name:"buttonOneI",maxSize:3145728,onDrop:mt,onDelete:xt,file:o.buttonOneI||et})]}),e.jsxs(q,{spacing:1.5,sx:{m:2},children:[e.jsx(w,{variant:"subtitle2",children:`"${o==null?void 0:o.buttonTowT_en} "button Tow Image`}),e.jsx(Y,{name:"buttonTowI",maxSize:3145728,onDrop:ut,onDelete:Tt,file:o.buttonTowI||ot})]})]})})]});return e.jsx(kt,{methods:C,onSubmit:y,children:e.jsxs(T,{container:!0,spacing:3,children:[rt,wt,pt]})})}g.propTypes={currentAdvantage:Ot.object};function Dt(){const t=_t(),{advantage:_}=It();return e.jsxs(jt,{maxWidth:t.themeStretch?!1:"lg",children:[e.jsx(Ct,{heading:"Edit Advantage Section",links:[{name:"Dashboard",href:S.dashboard.root},{name:"advantage",href:S.dashboard.service.root}],sx:{mb:{xs:3,md:5}}}),_&&e.jsx(g,{currentAdvantage:_})]})}function Ht(){return e.jsxs(e.Fragment,{children:[e.jsx(ft,{children:e.jsx("title",{children:" Dashboard: Advantage Edit"})}),e.jsx(Dt,{})]})}export{Ht as default};
