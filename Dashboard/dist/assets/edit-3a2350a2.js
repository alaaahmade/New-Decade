import{a$ as c,I as r,bK as Rt,a9 as t,b3 as S,ae as w,ag as M,be as Pt,b2 as lt,b6 as Dt,bg as K,bh as W,ao as F,bj as G,b8 as It,am as Et,ai as At}from"./index-7baedad1.js";import{j as Vt}from"./blog-ab74bd07.js";import{c as _t,a as e,d as wt,F as jt,u as Bt,e as z,g as Lt,R as s,C as Nt}from"./form-provider-f0797274.js";import{o as Tt,G as u,C as D}from"./yup-573c9287.js";import{R as Ut,C as $t,l as Ht,m as Kt}from"./attributeReduce-55c83204.js";import{d as Wt,a as zt}from"./RemoveCircleOutline-7d32947f.js";import{C as ct}from"./numeral-64476a1d.js";import{L as Gt}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";import"./createSvgIcon-43748fa8.js";const ft=({challenges:i,challenge:n,challengesDispatch:f,setAllValue:O,listName:q})=>{const{setCallBack:k}=r.useContext(Rt),L=_t().shape({title:e().min(3).max(100).required("Challenge title is required")}),R=r.useMemo(()=>({title:(n==null?void 0:n.text)||""}),[n]),I=wt({resolver:async(x,d,m)=>await Tt(L)(x,d,m),defaultValues:R}),{reset:E,watch:N,setValue:Q,handleSubmit:U,formState:{isSubmitting:J,isValid:X}}=I,j=N(),A=U(async x=>{console.log(`"${j.title}" is Valid`)});r.useEffect(()=>{n&&(E(R),k(A))},[n,R,E]);const $=x=>{x.preventDefault();const{value:d,id:m,name:P}=x.target,b=i.map(l=>l.id==m?{...l,text:d}:l);O(q,b),f({type:"edit",newChallenges:b})},H=x=>{const{id:d}=x.target,m=i.filter(P=>P.id!=d);O(q,m),f({type:"remove",id:d,newChallenges:m})};return t.jsx(jt,{methods:I,onSubmit:A,children:t.jsxs(S,{spacing:3,sx:{p:3},children:[t.jsx(w,{variant:"subtitle2",children:j.title}),t.jsx(Ut,{id:n==null?void 0:n.id,onChange:$,name:"title",label:"Solution Title"}),t.jsx(M,{id:n.id,variant:"outlined",sx:{color:"#FFFFFF",backgroundColor:"#b1a9a9","&:hover":{backgroundColor:"#b1a9a9",color:"red"}},startIcon:t.jsx(Wt,{}),onClick:H,children:"Remove"})]})})};ft.propTypes={challenges:c.array.isRequired,challenge:c.object.isRequired,challengesDispatch:c.func.isRequired,setAllValue:c.func.isRequired,listName:c.string.isRequired};const B=({challenges:i,challengesDispatch:n,setAllValue:f,listName:O})=>{const q=()=>{f(O,[...i,{id:i==null?void 0:i.length}]),n({type:"add",id:i==null?void 0:i.length})};return t.jsxs(t.Fragment,{children:[i==null?void 0:i.map(k=>t.jsx(ft,{id:k.id,challenge:k,challenges:i,challengesDispatch:n,setAllValue:f,listName:O},k.id)),t.jsx(M,{variant:"outlined",sx:{color:"#fff",backgroundColor:"#212B36","&:hover":{backgroundColor:"#454F5B"}},startIcon:t.jsx(zt,{}),onClick:q,children:"إضافة طلب جديد"})]})};B.propTypes={challenges:c.array.isRequired,challengesDispatch:c.func.isRequired,setAllValue:c.func.isRequired,listName:c.string.isRequired};function Ot({currentChallenges:i}){var Z,v,h,g,C,ii;const[n,f]=r.useState(!1),[O,q]=r.useState(null),k=Pt(),L=((v=(Z=i==null?void 0:i.lang)==null?void 0:Z.ar)==null?void 0:v.list)||[],R=((g=(h=i==null?void 0:i.lang)==null?void 0:h.en)==null?void 0:g.list)||[],I=((ii=(C=i==null?void 0:i.lang)==null?void 0:C.cr)==null?void 0:ii.list)||[],[E,N]=r.useReducer($t,L),[Q,U]=r.useReducer(Ht,R),[J,X]=r.useReducer(Kt,I),j=lt("up","md"),{enqueueSnackbar:A}=Bt(),$=Dt(),H=_t().shape({titleOne_ar:e().min(4).max(100).required("الجزء الأول من العنوان مطلوب باللغة العربية"),titleOne_en:e().min(4).max(100).required("English Firsts title is required"),titleOne_cr:e().min(4).max(100).required("kurd Firsts title is required"),span_ar:e().min(4).max(50).required("الكلمة المميزة مطلوبة بالعربية"),span_en:e().min(4).max(50).required("English special Word is required"),span_cr:e().min(4).max(50).required("kurd special Word is required"),titleTow_ar:e().min(1).max(50).required("الجزء الثاني من العنوان مطلوب باللغة العربية"),titleTow_en:e().min(1).max(50).required("English Seconds title is required"),titleTow_cr:e().min(1).max(50).required("kurd Seconds title is required"),descriptionOne_ar:e().min(10).max(5e3).required("الوصف الأول مطلوب باللغة العربية"),descriptionOne_en:e().min(10).max(5e3).required("English First Description is required"),descriptionOne_cr:e().min(10).max(5e3).required("kurd First Description is required"),descriptionTow_ar:e().min(10).max(5e3).required("الوصف الثاني مطلوب باللغة العربية"),descriptionTow_en:e().min(10).max(5e3).required("English Second Description is required"),descriptionTow_cr:e().min(10).max(5e3).required("kurd Second Description is required"),buttonOneT_ar:e().min(4).max(50).required("نص المفتاح الأول مطلوب بالعربية"),buttonOneT_en:e().min(4).max(50).required("english firsts button text is required"),buttonOneT_cr:e().min(4).max(50).required("kurd firsts button text is required"),buttonOneP_ar:e().min(4).max(100).required("مسار المفتاح الأول مطلوب بالعربية"),buttonOneP_en:e().min(4).max(100).required("english firsts button path is required"),buttonOneP_cr:e().min(4).max(100).required("kurd firsts button path is required"),list_ar:z().min(1).max(3).required("Arabic Challenges List is required"),list_en:z().min(1).max(3).required("English Challenges List is required"),list_cr:z().min(1).max(3).required("Kurd Challenges List is required"),image:e().required("Image File is required")}),x=r.useMemo(()=>{var p,a,_,T,y,V,ti,oi,si,ei,ni,di,ai,ri,xi,mi,bi,pi,ci,_i,wi,ji,Ti,fi,Oi,qi,ki,yi,ui,Fi,Si,Ri,Pi,li,Di,Ii,Ei,Ai,Vi,Bi,Li,Ni,Ui,$i,Hi,Ki,Wi,zi,Gi,Mi,Qi,Ji,Xi,Yi,Zi,vi,hi,gi,Ci,it,tt,ot,st,et,nt,dt,at,rt,xt,mt,bt,pt;return{titleOne_ar:((a=(p=i==null?void 0:i.lang)==null?void 0:p.ar)==null?void 0:a.titleOne)||"",titleOne_en:((T=(_=i==null?void 0:i.lang)==null?void 0:_.en)==null?void 0:T.titleOne)||"",titleOne_cr:((V=(y=i==null?void 0:i.lang)==null?void 0:y.cr)==null?void 0:V.titleOne)||"",span_ar:((oi=(ti=i==null?void 0:i.lang)==null?void 0:ti.ar)==null?void 0:oi.span)||"",span_en:((ei=(si=i==null?void 0:i.lang)==null?void 0:si.en)==null?void 0:ei.span)||"",span_cr:((di=(ni=i==null?void 0:i.lang)==null?void 0:ni.cr)==null?void 0:di.span)||"",titleTow_ar:((ri=(ai=i==null?void 0:i.lang)==null?void 0:ai.ar)==null?void 0:ri.titleTow)||"",titleTow_en:((mi=(xi=i==null?void 0:i.lang)==null?void 0:xi.en)==null?void 0:mi.titleTow)||"",titleTow_cr:((pi=(bi=i==null?void 0:i.lang)==null?void 0:bi.cr)==null?void 0:pi.titleTow)||"",descriptionOne_ar:((_i=(ci=i==null?void 0:i.lang)==null?void 0:ci.ar)==null?void 0:_i.descOne)||"",descriptionOne_en:((ji=(wi=i==null?void 0:i.lang)==null?void 0:wi.en)==null?void 0:ji.descOne)||"",descriptionOne_cr:((fi=(Ti=i==null?void 0:i.lang)==null?void 0:Ti.cr)==null?void 0:fi.descOne)||"",descriptionTow_ar:((qi=(Oi=i==null?void 0:i.lang)==null?void 0:Oi.ar)==null?void 0:qi.descTow)||"",descriptionTow_en:((yi=(ki=i==null?void 0:i.lang)==null?void 0:ki.en)==null?void 0:yi.descTow)||"",descriptionTow_cr:((Fi=(ui=i==null?void 0:i.lang)==null?void 0:ui.cr)==null?void 0:Fi.descTow)||"",buttonOneT_ar:((Pi=(Ri=(Si=i==null?void 0:i.lang)==null?void 0:Si.ar)==null?void 0:Ri.buttonOne)==null?void 0:Pi.text)||"",buttonOneT_en:((Ii=(Di=(li=i==null?void 0:i.lang)==null?void 0:li.en)==null?void 0:Di.buttonOne)==null?void 0:Ii.text)||"",buttonOneT_cr:((Vi=(Ai=(Ei=i==null?void 0:i.lang)==null?void 0:Ei.cr)==null?void 0:Ai.buttonOne)==null?void 0:Vi.text)||"",buttonOneP_ar:((Ni=(Li=(Bi=i==null?void 0:i.lang)==null?void 0:Bi.ar)==null?void 0:Li.buttonOne)==null?void 0:Ni.link)||"",buttonOneP_en:((Hi=($i=(Ui=i==null?void 0:i.lang)==null?void 0:Ui.en)==null?void 0:$i.buttonOne)==null?void 0:Hi.link)||"",buttonOneP_cr:((zi=(Wi=(Ki=i==null?void 0:i.lang)==null?void 0:Ki.ar)==null?void 0:Wi.buttonOne)==null?void 0:zi.link)||"",buttonTowT_ar:((Qi=(Mi=(Gi=i==null?void 0:i.lang)==null?void 0:Gi.ar)==null?void 0:Mi.buttonTow)==null?void 0:Qi.text)||"",buttonTowT_en:((Yi=(Xi=(Ji=i==null?void 0:i.lang)==null?void 0:Ji.en)==null?void 0:Xi.buttonTow)==null?void 0:Yi.text)||"",buttonTowT_cr:((hi=(vi=(Zi=i==null?void 0:i.lang)==null?void 0:Zi.cr)==null?void 0:vi.buttonTow)==null?void 0:hi.text)||"",buttonTowP_ar:((it=(Ci=(gi=i==null?void 0:i.lang)==null?void 0:gi.ar)==null?void 0:Ci.buttonTow)==null?void 0:it.link)||"",buttonTowP_en:((st=(ot=(tt=i==null?void 0:i.lang)==null?void 0:tt.ar)==null?void 0:ot.buttonTow)==null?void 0:st.link)||"",buttonTpwP_cr:((dt=(nt=(et=i==null?void 0:i.lang)==null?void 0:et.cr)==null?void 0:nt.buttonTow)==null?void 0:dt.link)||"",list_ar:((rt=(at=i==null?void 0:i.lang)==null?void 0:at.ar)==null?void 0:rt.list)||"",list_en:((mt=(xt=i==null?void 0:i.lang)==null?void 0:xt.en)==null?void 0:mt.list)||"",list_cr:((pt=(bt=i==null?void 0:i.lang)==null?void 0:bt.cr)==null?void 0:pt.list)||"",image:(i==null?void 0:i.img)||""}},[i]),d=wt({resolver:async(p,a,_)=>await Tt(H)(p,a,_),defaultValues:x}),{reset:m,watch:P,setValue:b,handleSubmit:l,formState:{isSubmitting:qt,isValid:Qt}}=d,o=P();r.useEffect(()=>{i&&m(x)},[i,x,m]);const Y=l(async p=>{try{let a="";if(n){i!=null&&i.img&&await K.post("/deleteFile",{fileUrl:i.img});const T=new FormData;if(o.image){T.append("file",o.image);const y=await K.post("/uploadFile/challenges",T,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:V}=y.data.data;a=V}}const _={img:a||i.image,lang:{ar:{titleOne:o==null?void 0:o.titleOne_ar,titleTow:o==null?void 0:o.titleTow_ar,span:o==null?void 0:o.span_ar,descOne:o==null?void 0:o.descriptionOne_ar,descTow:o==null?void 0:o.descriptionTow_ar,buttonOne:{text:o==null?void 0:o.buttonOneT_ar,link:o==null?void 0:o.buttonOneP_ar},buttonTow:{text:o==null?void 0:o.buttonTowT_ar,link:o==null?void 0:o.buttonTowP_ar},list:o.list_ar},en:{titleOne:o==null?void 0:o.titleOne_en,titleTow:o==null?void 0:o.titleTow_en,span:o==null?void 0:o.span_en,descOne:o==null?void 0:o.descriptionOne_en,descTow:o==null?void 0:o.descriptionTow_en,buttonOne:{text:o==null?void 0:o.buttonOneT_en,link:o==null?void 0:o.buttonOneP_en},buttonTow:{text:o==null?void 0:o.buttonTowT_en,link:o==null?void 0:o.buttonTowP_en},list:o.list_en},cr:{titleOne:o==null?void 0:o.titleOne_cr,titleTow:o==null?void 0:o.titleTow_cr,span:o==null?void 0:o.span_cr,descOne:o==null?void 0:o.descriptionOne_cr,descTow:o==null?void 0:o.descriptionTow_cr,buttonOne:{text:o==null?void 0:o.buttonOneT_cr,link:o==null?void 0:o.buttonOneP_cr},buttonTow:{text:o==null?void 0:o.buttonTowT_cr,link:o==null?void 0:o.buttonTowP_cr},list:o.list_cr}}};await K.put("/edit/challenges",_),m(),$.onFalse(),A(i?"Update success!":"Create success!"),window.location.reload(),W.success("Hero's Updated Successfully.")}catch(a){W.error(a.response.data.msg||"Something went wrong!"),console.error(a)}}),kt=r.useCallback(p=>{const a=p[0];f(!0);const _=Object.assign(a,{preview:URL.createObjectURL(a)});q(a),a&&b("image",_,{shouldValidate:!0})},[b]),yt=r.useCallback(()=>{b("image",null),q(null)},[b]),ut=t.jsxs(t.Fragment,{children:[j&&t.jsxs(u,{md:4,children:[t.jsx(w,{variant:"h6",sx:{mb:.5},children:"Texts"}),t.jsx(w,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),t.jsx(u,{xs:12,md:8,children:t.jsxs(ct,{children:[!j&&t.jsx(D,{title:"Texts"}),t.jsx(D,{title:"Arabic Text"}),t.jsxs(S,{spacing:3,sx:{p:3},children:[t.jsx(s,{name:"titleOne_ar",label:"الجزء الأول من العنوان بالعربية",sx:{direction:"rtl"}}),t.jsx(s,{name:"span_ar",label:"الكلمة المميزة بالعربية",sx:{direction:"rtl"}}),t.jsx(s,{name:"titleTow_ar",label:"الجزء الثاني من العنوان بالعربية",sx:{direction:"rtl"}}),t.jsx(s,{type:"text",name:"descriptionOne_ar",label:"الجزء الأول من الوصف بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}}),t.jsx(s,{type:"text",name:"descriptionTow_ar",label:"الجزء الثاني من الوصف بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonOneT_ar",label:"نص المفتاح الأول بالعربية",sx:{direction:"rtl",width:"49%"}}),t.jsx(s,{name:"buttonOneP_ar",label:"مسار المفتاح الأول",sx:{width:"49%"}})]}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonTowT_ar",label:"نص المفتاح الثاني بالعربية",sx:{direction:"rtl",width:"49%"}}),t.jsx(s,{name:"buttonTowP_ar",label:"مسار المفتاح الثاني",sx:{width:"49%"}})]}),t.jsxs(S,{spacing:0,sx:{p:3},children:[t.jsx(w,{variant:"h6",sx:{mb:.5},children:"Arabic Challenges List"}),t.jsx(B,{setAllValue:b,challenges:E,challengesDispatch:N,listName:"list_ar"})]}),t.jsx(D,{title:"English Text"}),t.jsx(s,{name:"titleOne_en",label:"english first section of title"}),t.jsx(s,{name:"span_en",label:"english special word"}),t.jsx(s,{name:"titleTow_en",label:"english second section of title"}),t.jsx(s,{type:"text",name:"descriptionOne_en",label:"english first description",multiline:!0,rows:3}),t.jsx(s,{type:"text",name:"descriptionTow_en",label:"english second description",multiline:!0,rows:3}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonOneT_en",label:"english firsts button text",sx:{width:"49%"}}),t.jsx(s,{name:"buttonOneP_en",label:"firsts button link",sx:{width:"49%"}})]}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonTowT_en",label:"english seconds button text",sx:{width:"49%"}}),t.jsx(s,{name:"buttonTowP_en",label:"seconds button link",sx:{width:"49%"}})]}),t.jsxs(S,{spacing:0,sx:{p:3},children:[t.jsx(w,{variant:"h6",sx:{mb:.5},children:"English Challenges List"}),t.jsx(B,{setAllValue:b,challenges:Q,challengesDispatch:U,listName:"list_en"})]}),t.jsx(D,{title:"Kurd Text"}),t.jsx(s,{name:"titleOne_cr",label:"kurd first section of title"}),t.jsx(s,{name:"titleTow_cr",label:"kurd second section of title"}),t.jsx(s,{name:"span_cr",label:"kurd special word"}),t.jsx(s,{type:"text",name:"descriptionOne_cr",label:"kurd first description",multiline:!0,rows:3}),t.jsx(s,{type:"text",name:"descriptionTow_cr",label:"kurd second description",multiline:!0,rows:3}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonOneT_cr",label:"kurd firsts button text",sx:{width:"49%"}}),t.jsx(s,{name:"buttonOneP_cr",label:"firsts button link",sx:{width:"49%"}})]}),t.jsxs(F,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(s,{name:"buttonTowT_cr",label:"kurd seconds button text",sx:{width:"49%"}}),t.jsx(s,{name:"buttonTpwP_cr",label:"seconds button link",sx:{width:"49%"}})]}),t.jsxs(S,{spacing:0,sx:{p:3},children:[t.jsx(w,{variant:"h6",sx:{mb:.5},children:"Kurd Challenges List"}),t.jsx(B,{setAllValue:b,challenges:J,challengesDispatch:X,listName:"list_cr"})]})]})]})})]}),Ft=t.jsxs(t.Fragment,{children:[j&&t.jsx(u,{md:4}),t.jsxs(u,{xs:12,md:8,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(M,{color:"inherit",variant:"outlined",size:"large",onClick:()=>k.push(G.dashboard.root),children:"cancel"}),t.jsx(Gt,{type:"button",variant:"contained",size:"large",loading:qt,sx:{ml:2},onClick:async()=>{var p,a;await Y(),(p=d==null?void 0:d.formState)!=null&&p.errors&&Object.keys((a=d==null?void 0:d.formState)==null?void 0:a.errors).map(T=>{var y;W.error((y=d==null?void 0:d.formState)==null?void 0:y.errors[T].message)})},children:"Save Challenges"})]})]}),St=t.jsxs(t.Fragment,{children:[j&&t.jsxs(u,{md:4,children:[t.jsx(w,{variant:"h6",sx:{mb:.5},children:"Image"}),t.jsx(w,{variant:"body2",sx:{color:"text.secondary"},children:"hero Section Image..."})]}),t.jsx(u,{xs:12,md:8,children:t.jsxs(ct,{sx:{p:2},children:[!j&&t.jsx(D,{title:"Image"}),t.jsxs(S,{spacing:1.5,children:[t.jsx(w,{variant:"subtitle2",children:"Challenges Image"}),t.jsx(Lt,{name:"image",maxSize:3145728,onDrop:kt,onDelete:yt,file:o.image||O})]})]})})]});return t.jsx(jt,{methods:d,onSubmit:Y,children:t.jsxs(u,{container:!0,spacing:3,children:[ut,St,Ft]})})}Ot.propTypes={currentChallenges:c.object};function Mt(){const i=It(),{challenges:n}=Vt();return t.jsxs(Et,{maxWidth:i.themeStretch?!1:"lg",children:[t.jsx(Nt,{heading:"Edit Challenges Section",links:[{name:"Dashboard",href:G.dashboard.root},{name:"challenges",href:G.dashboard.service.root}],sx:{mb:{xs:3,md:5}}}),n&&t.jsx(Ot,{currentChallenges:n})]})}function so(){return t.jsxs(t.Fragment,{children:[t.jsx(At,{children:t.jsx("title",{children:" Dashboard: Challenges Edit"})}),t.jsx(Mt,{})]})}export{so as default};
