import{a$ as S,I as j,bG as Ue,a9 as e,b3 as w,ae as x,ao as ae,ag as de,be as Be,b2 as Pe,bg as N,bh as te,bj as oe,b8 as Ve,am as Ne,ai as $e}from"./index-7baedad1.js";import{e as We}from"./blog-ab74bd07.js";import{c as Re,a as l,d as Le,F as ke,g as Ge,u as He,e as ne,R as g,C as ze}from"./form-provider-f0797274.js";import{o as De,G as h,C as $}from"./yup-573c9287.js";import{R as E,c as Ke,d as Qe,e as Je}from"./attributeReduce-55c83204.js";import{d as Xe,a as Ye}from"./RemoveCircleOutline-7d32947f.js";import"./components.styled-0a52fcef.js";import{C as W}from"./numeral-64476a1d.js";import{L as Ze}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";import"./createSvgIcon-43748fa8.js";const Ie=({apps:i,app:t,appsDispatch:p,setAllValue:R,listName:L})=>{const[U,Q]=j.useState(null);j.useState(null);const[u,M]=j.useState(!1),[ee,le]=j.useState(!1),{setCallBack:ie}=j.useContext(Ue),se=Re().shape({name:l().min(4).max(50).required("name is required"),title:l().min(4).max(100).required("title is required"),descOne:l().min(10).max(5e3).required("First Description is required"),descTow:l().min(10).max(5e3).required("Second Description is required"),buttonOneT:l().min(4).max(50).required("First Button Text is required"),buttonOneP:l().min(4).max(50).required("First Button path is required"),buttonTowT:l().min(4).max(50).required("Second Button Text is required"),buttonTowP:l().min(4).max(50).required("Second Button path is required"),img:l().max(500).required("Image is required")}),K=j.useMemo(()=>{var a,n,o,d;return{name:(t==null?void 0:t.name)||"",title:(t==null?void 0:t.title)||"",descOne:(t==null?void 0:t.descOne)||"",descTow:(t==null?void 0:t.descTow)||"",buttonOneT:((a=t==null?void 0:t.buttonOne)==null?void 0:a.text)||"",buttonOneP:((n=t==null?void 0:t.buttonOne)==null?void 0:n.link)||"",buttonTowT:((o=t==null?void 0:t.buttonTow)==null?void 0:o.text)||"",buttonTowP:((d=t==null?void 0:t.buttonTow)==null?void 0:d.link)||"",img:(t==null?void 0:t.img)||""}},[t]),G=Le({resolver:async(a,n,o)=>await De(se)(a,n,o),defaultValues:K}),{reset:b,watch:H,setValue:B,handleSubmit:k,formState:{isSubmitting:ce,isValid:me}}=G,P=H(),s=k(async a=>{let n;if(u){t!=null&&t.img&&await axiosReq.post("/deleteFile",{fileUrl:t.img});const o=new FormData;P.img&&(o.append("file",P.img),(await axiosReq.post("/uploadFile/apps",o,{headers:{"Content-Type":"multipart/form-data"}})).data.data)}if(ee){t!=null&&t.descImg&&await axiosReq.post("/deleteFile",{fileUrl:t.descImg});const o=new FormData;if(P.descImg){o.append("file",P.descImg);const d=await axiosReq.post("/uploadFile/apps",o,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:r}=d.data.data;n=r,B("descImg",n)}}});j.useEffect(()=>{t&&(b(K),ie(s))},[t,K,b]);const V=a=>{a.preventDefault();const{value:n,id:o,name:d}=a.target,r=i.map(m=>m.id==o?{...m,[d]:n}:m);R(L,r),p({type:"edit",newApps:r})},z=a=>{a.preventDefault();const{value:n,id:o,name:d}=a.target,r=i.map((m,f)=>{if(f==o){if(d==="buttonOneT")return{...m,buttonOne:{...m.buttonOne,text:n}};if(d==="buttonOneP")return{...m,buttonOne:{...m.buttonOne,link:n}};if(d==="buttonTowT")return{...m,buttonTow:{...m.buttonTow,text:n}};if(d==="buttonTowP")return{...m,buttonTow:{...m.buttonTow,link:n}}}return m});R(L,r),p({type:"edit",newApps:r})},J=(a,n,o)=>{const d=a?a[0]:null,r=i.findIndex(f=>f.id==n.id),m=i.map((f,c)=>c===r?{...f,[o]:d}:f);R(L,m),p({type:"edit",newApps:m,index:r})},X=j.useCallback(a=>{const n=a[0];M(!0);const o=Object.assign(n,{preview:URL.createObjectURL(n)});Q(n),n&&B("img",o,{shouldValidate:!0})},[B]),Y=j.useCallback(()=>{B("img",null),Q(null)},[B]),Z=a=>{const{id:n}=a.target,o=i.filter(d=>d.id!=n);R(L,o),p({type:"remove",id:n,newApps:o})};return e.jsx(ke,{methods:G,onSubmit:s,children:e.jsxs(w,{spacing:3,sx:{p:3},children:[e.jsx(x,{variant:"subtitle2",children:P.name}),e.jsx(E,{id:t.id,onChange:V,name:"name",label:"app Name"}),e.jsx(E,{id:t.id,onChange:V,name:"title",label:"app Title"}),e.jsx(E,{id:t.id,onChange:V,type:"text",name:"descOne",label:"app first description",multiline:!0,rows:3}),e.jsx(E,{id:t.id,onChange:V,type:"text",name:"descTow",label:"app second description",multiline:!0,rows:3}),e.jsxs(ae,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:1},children:[e.jsx(E,{id:t.id,onChange:z,name:"buttonOneT",label:"first button text"}),e.jsx(E,{id:t.id,onChange:z,name:"buttonOneP",label:"first button path"})]}),e.jsxs(ae,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:1},children:[e.jsx(E,{id:t.id,onChange:z,name:"buttonTowT",label:"second button text"}),e.jsx(E,{id:t.id,onChange:z,name:"buttonTowP",label:"second button path"})]}),e.jsxs(w,{spacing:1.5,children:[e.jsx(x,{variant:"subtitle2",children:"Image"}),e.jsx(Ge,{name:"img",maxSize:3145728,onDrop:a=>{J(a,t,"img"),X(a)},onDelete:a=>{J(null,t,"img"),Y(a)},file:P.img||U})]}),e.jsx(de,{id:t.id,variant:"outlined",sx:{color:"#FFFFFF",backgroundColor:"#b1a9a9","&:hover":{backgroundColor:"#b1a9a9",color:"red"}},startIcon:e.jsx(Xe,{}),onClick:Z,children:"Remove"})]})})};Ie.propTypes={apps:S.array.isRequired,app:S.object.isRequired,appsDispatch:S.func.isRequired,setAllValue:S.func.isRequired,listName:S.string.isRequired};const v=({apps:i,appsDispatch:t,setAllValue:p,listName:R})=>{const L=()=>{p(R,[...i,{id:i==null?void 0:i.length}]),t({type:"add",id:i==null?void 0:i.length})};return e.jsxs(e.Fragment,{children:[i==null?void 0:i.map(U=>e.jsx(Ie,{id:U.id,app:U,apps:i,appsDispatch:t,setAllValue:p,listName:R},U.id)),e.jsx(de,{variant:"outlined",sx:{color:"#fff",backgroundColor:"#212B36","&:hover":{backgroundColor:"#454F5B"}},startIcon:e.jsx(Ye,{}),onClick:L,children:"إضافة طلب جديد"})]})};v.propTypes={apps:S.array.isRequired,appsDispatch:S.func.isRequired,setAllValue:S.func.isRequired,listName:S.string.isRequired};function Ee({currentModular:i}){var X,Y,Z;const t=Be(),p=Pe("up","md"),{enqueueSnackbar:R}=He(),L=((X=i==null?void 0:i.lang)==null?void 0:X.ar.apps)||[],U=((Y=i==null?void 0:i.lang)==null?void 0:Y.en.apps)||[],Q=((Z=i==null?void 0:i.lang)==null?void 0:Z.cr.apps)||[],[u,M]=j.useReducer(Ke,L),[ee,le]=j.useReducer(Qe,U),[ie,se]=j.useReducer(Je,Q),K=Re().shape({titleOne_ar:l().min(3).max(50).required("الجزء الأول من العنوان مطلوب باللغة العربية"),titleOne_en:l().min(3).max(50).required("English First section of title is required"),titleOne_cr:l().min(3).max(50).required("kurd First section of title is required"),span_ar:l().min(3).max(50).required("الكلمة المميزة مطلوبة بالعربية"),span_en:l().min(3).max(50).required("English Special Word is required"),span_cr:l().min(3).max(50).required("kurd Special Word is required"),titleTow_ar:l().min(3).max(50).required("الجزء الثاني من العنوان مطلوب باللغة العربية"),titleTow_en:l().min(3).max(50).required("English Second section of title is required"),titleTow_cr:l().min(3).max(50).required("kurd Second section of title is required"),descriptionOne_ar:l().min(10).max(5e3).required("الوصف الأول مطلوب باللغة العربية"),descriptionOne_en:l().min(10).max(5e3).required("English Firs Description is required"),descriptionOne_cr:l().min(10).max(5e3).required("kurd Firs Description is required"),descriptionTow_ar:l().min(10).max(5e3).required("الوصف الثاني مطلوب باللغة العربية"),descriptionTow_en:l().min(10).max(5e3).required("English second Description is required"),descriptionTow_cr:l().min(10).max(5e3).required("kurd second Description is required"),appsList_ar:ne().min(1).max(5).required("Apps List مطلوب باللغة العربية"),appsList_en:ne().min(1).max(5).required("English Apps List"),appsList_cr:ne().min(1).max(5).required("Kurd Apps List")}),G=j.useMemo(()=>{var a,n,o,d,r,m,f,c,_,T,y,q,O,F,C,A,D,I,re,xe,pe,ge,he,be,je,we,fe,_e,Te,ye,qe,Oe,Fe,Ce,Ae,Se;return{titleOne_ar:((n=(a=i==null?void 0:i.lang)==null?void 0:a.ar)==null?void 0:n.titleOne)||"",titleOne_en:((d=(o=i==null?void 0:i.lang)==null?void 0:o.en)==null?void 0:d.titleOne)||"",titleOne_cr:((m=(r=i==null?void 0:i.lang)==null?void 0:r.cr)==null?void 0:m.titleOne)||"",titleTow_ar:((c=(f=i==null?void 0:i.lang)==null?void 0:f.ar)==null?void 0:c.titleTow)||"",titleTow_en:((T=(_=i==null?void 0:i.lang)==null?void 0:_.en)==null?void 0:T.titleTow)||"",titleTow_cr:((q=(y=i==null?void 0:i.lang)==null?void 0:y.cr)==null?void 0:q.titleTow)||"",span_ar:((F=(O=i==null?void 0:i.lang)==null?void 0:O.ar)==null?void 0:F.span)||"",span_en:((A=(C=i==null?void 0:i.lang)==null?void 0:C.en)==null?void 0:A.span)||"",span_cr:((I=(D=i==null?void 0:i.lang)==null?void 0:D.cr)==null?void 0:I.span)||"",descriptionOne_ar:((xe=(re=i==null?void 0:i.lang)==null?void 0:re.ar)==null?void 0:xe.descOne)||"",descriptionOne_en:((ge=(pe=i==null?void 0:i.lang)==null?void 0:pe.en)==null?void 0:ge.descOne)||"",descriptionOne_cr:((be=(he=i==null?void 0:i.lang)==null?void 0:he.cr)==null?void 0:be.descOne)||"",descriptionTow_ar:((we=(je=i==null?void 0:i.lang)==null?void 0:je.ar)==null?void 0:we.descTow)||"",descriptionTow_en:((_e=(fe=i==null?void 0:i.lang)==null?void 0:fe.en)==null?void 0:_e.descTow)||"",descriptionTow_cr:((ye=(Te=i==null?void 0:i.lang)==null?void 0:Te.cr)==null?void 0:ye.descTow)||"",appsList_ar:((Oe=(qe=i==null?void 0:i.lang)==null?void 0:qe.ar)==null?void 0:Oe.apps)||"",appsList_en:((Ce=(Fe=i==null?void 0:i.lang)==null?void 0:Fe.en)==null?void 0:Ce.apps)||"",appsList_cr:((Se=(Ae=i==null?void 0:i.lang)==null?void 0:Ae.cr)==null?void 0:Se.apps)||""}},[i]),b=Le({resolver:async(a,n,o)=>await De(K)(a,n,o),defaultValues:G}),{reset:H,watch:B,setValue:k,handleSubmit:ce,formState:{isSubmitting:me,isValid:P}}=b,s=B();j.useEffect(()=>{i&&H(G)},[i,G,H]);const V=ce(async a=>{var n,o;try{const d=await Promise.all(s==null?void 0:s.appsList_ar.map(async(c,_)=>{var T,y,q,O,F,C;if(typeof c.img=="object"){(q=(y=(T=i==null?void 0:i.lang)==null?void 0:T.ar)==null?void 0:y.apps[_])!=null&&q.img&&await N.post("/deleteFile",{fileUrl:(C=(F=(O=i==null?void 0:i.lang)==null?void 0:O.ar)==null?void 0:F.apps[_])==null?void 0:C.img});const A=new FormData;if(c.img){A.append("file",c.img);const D=await N.post("/uploadFile/modular",A,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:I}=D.data.data;c.img=I}}return c})),r=await Promise.all(s==null?void 0:s.appsList_en.map(async(c,_)=>{var T,y,q,O,F,C;if(typeof c.img=="object"){(q=(y=(T=i==null?void 0:i.lang)==null?void 0:T.en)==null?void 0:y.apps[_])!=null&&q.img&&await N.post("/deleteFile",{fileUrl:(C=(F=(O=i==null?void 0:i.lang)==null?void 0:O.en)==null?void 0:F.apps[_])==null?void 0:C.img});const A=new FormData;if(c.img){A.append("file",c.img);const D=await N.post("/uploadFile/modular",A,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:I}=D.data.data;c.img=I}}return c})),m=await Promise.all(s==null?void 0:s.appsList_cr.map(async(c,_)=>{var T,y,q,O,F,C;if(typeof c.img=="object"){(q=(y=(T=i==null?void 0:i.lang)==null?void 0:T.cr)==null?void 0:y.apps[_])!=null&&q.img&&await N.post("/deleteFile",{fileUrl:(C=(F=(O=i==null?void 0:i.lang)==null?void 0:O.cr)==null?void 0:F.apps[_])==null?void 0:C.img});const A=new FormData;if(c.img){A.append("file",c.img);const D=await N.post("/uploadFile/modular",A,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:I}=D.data.data;c.img=I}}return c}));await k("appsList_ar",d),await k("appsList_en",r),await k("appsList_cr",m);const f={lang:{ar:{titleOne:s==null?void 0:s.titleOne_ar,titleTow:s==null?void 0:s.titleTow_ar,span:s==null?void 0:s.span_ar,descOne:s==null?void 0:s.descriptionOne_ar,descTow:s==null?void 0:s.descriptionTow_ar,apps:s.appsList_ar},en:{titleOne:s==null?void 0:s.titleOne_en,titleTow:s==null?void 0:s.titleTow_en,span:s==null?void 0:s.span_en,descOne:s==null?void 0:s.descriptionOne_ar,descTow:s==null?void 0:s.descriptionTow_ar,apps:s.appsList_en},cr:{titleOne:s==null?void 0:s.titleOne_cr,titleTow:s==null?void 0:s.titleTow_cr,span:s==null?void 0:s.span_cr,descOne:s==null?void 0:s.descriptionOne_cr,descTow:s==null?void 0:s.descriptionTow_cr,apps:s.appsList_cr}}};await N.put("/edit/modular",f),H(),R("Update success!"),window.location.reload(),te.success("Apps's Updated Successfully.")}catch(d){te.error(((o=(n=d==null?void 0:d.response)==null?void 0:n.data)==null?void 0:o.msg)||"Something went wrong!"),console.error(d)}}),z=e.jsx(e.Fragment,{children:e.jsxs(ae,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",p:2},children:[e.jsx(de,{color:"inherit",variant:"outlined",size:"large",onClick:()=>{H(),t.push(oe.dashboard.root)},children:"cancel"}),e.jsx(Ze,{type:"submit",variant:"contained",size:"large",loading:me,sx:{ml:2},onClick:async()=>{var a,n;await V(),(a=b==null?void 0:b.formState)!=null&&a.errors&&Object.keys((n=b==null?void 0:b.formState)==null?void 0:n.errors).map(d=>{var r;te.error((r=b==null?void 0:b.formState)==null?void 0:r.errors[d].message)})},children:"Save Modular"})]})}),J=e.jsxs(e.Fragment,{children:[p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsxs(W,{children:[e.jsx($,{title:"Arabic Text"}),e.jsxs(w,{spacing:3,sx:{p:3},children:[e.jsx(g,{name:"titleOne_ar",label:"الجزء الأول من العنوان بالعربية",sx:{direction:"rtl"}}),e.jsx(g,{name:"span_ar",label:"الكلمة المميزة بالعربية",sx:{direction:"rtl"}}),e.jsx(g,{name:"titleTow_ar",label:"الجزء الثاني من العنوان بالعربية",sx:{direction:"rtl"}}),e.jsx(g,{type:"text",name:"descriptionOne_ar",label:"الوصف الأول بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}}),e.jsx(g,{type:"text",name:"descriptionTow_ar",label:"الوصف الثاني بالعربية",multiline:!0,rows:3,sx:{direction:"rtl"}})]})]})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsxs(W,{children:[e.jsx($,{title:"Arabic Apps List"}),e.jsx(w,{spacing:3,sx:{p:0},children:e.jsx(w,{spacing:0,sx:{p:0},children:e.jsx(v,{setAllValue:k,apps:u,appsDispatch:M,listName:"appsList_ar"})})})]})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsx(W,{children:e.jsxs(w,{spacing:3,sx:{p:0},children:[e.jsx($,{title:"English Text"}),e.jsx(g,{name:"titleOne_en",label:"English First section of title"}),e.jsx(g,{name:"span_en",label:"english Special Word"}),e.jsx(g,{name:"titleTow_en",label:"English Second section of title"}),e.jsx(g,{type:"text",name:"descriptionOne_en",label:"English First description",multiline:!0,rows:3}),e.jsx(g,{type:"text",name:"descriptionTow_en",label:"English Second description",multiline:!0,rows:3})]})})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsx(W,{children:e.jsxs(w,{spacing:3,sx:{p:0},children:[e.jsx($,{title:"English Apps List"}),e.jsxs(w,{spacing:0,sx:{p:3},children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps"}),e.jsx(v,{setAllValue:k,apps:ee,appsDispatch:le,listName:"appsList_en"})]})]})})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Texts"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsx(W,{children:e.jsxs(w,{spacing:3,sx:{p:0},children:[e.jsx($,{title:"Kurd Text"}),e.jsx(g,{name:"titleOne_cr",label:"kurd First section of title"}),e.jsx(g,{name:"span_cr",label:"kurd Special Word"}),e.jsx(g,{name:"titleTow_cr",label:"kurd Second section of title"}),e.jsx(g,{type:"text",name:"descriptionOne_cr",label:"kurd First description",multiline:!0,rows:3}),e.jsx(g,{type:"text",name:"descriptionTow_cr",label:"kurd Second description",multiline:!0,rows:3})]})})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps List"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apps Title, description, buttons..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsx(W,{children:e.jsxs(w,{spacing:3,sx:{p:0},children:[e.jsx($,{title:"Kurd Apps List"}),e.jsxs(w,{spacing:0,sx:{p:3},children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Apps"}),e.jsx(v,{setAllValue:k,apps:ie,appsDispatch:se,listName:"appsList_cr"})]})]})})}),p&&e.jsxs(h,{md:4,children:[e.jsx(x,{variant:"h6",sx:{mb:.5},children:"Actions"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Save Modular, cancel..."})]}),e.jsx(h,{xs:12,md:8,children:e.jsx(W,{children:e.jsxs(w,{spacing:3,sx:{p:0},children:[e.jsx($,{title:"Actions"}),z]})})})]});return e.jsx(ke,{methods:b,onSubmit:V,children:e.jsx(h,{container:!0,spacing:3,children:J})})}Ee.propTypes={currentModular:S.object};function ve(){const i=Ve(),{modular:t}=We();return e.jsxs(Ne,{maxWidth:i.themeStretch?!1:"lg",children:[e.jsx(ze,{heading:"Edit Modular Section",links:[{name:"Dashboard",href:oe.dashboard.root},{name:"modular",href:oe.dashboard.edit.modular}],sx:{mb:{xs:3,md:5}}}),t&&e.jsx(Ee,{currentModular:t})]})}function mi(){return e.jsxs(e.Fragment,{children:[e.jsx($e,{children:e.jsx("title",{children:" Dashboard: Modular Edit"})}),e.jsx(ve,{})]})}export{mi as default};
