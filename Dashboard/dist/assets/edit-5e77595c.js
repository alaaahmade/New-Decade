import{a$ as _,I as p,bF as Ti,a9 as a,b3 as R,ao as Mi,be as ri,b2 as ui,bg as y,bh as di,ae as q,ag as ia,bj as Ci,b8 as aa,am as la,ai as oa}from"./index-7baedad1.js";import{k as sa}from"./blog-ab74bd07.js";import{c as vi,a as s,d as Qi,F as Ji,g as na,u as ea,e as ji,R as n,C as ma}from"./form-provider-f0797274.js";import{o as Xi,G as oi,C as bi}from"./yup-573c9287.js";import"./components.styled-0a52fcef.js";import{T as Fi}from"./attributeReduce-55c83204.js";import{C as xa}from"./numeral-64476a1d.js";import{L as pa}from"./LoadingButton-5b466cf8.js";import"./axios-cb1c23e4.js";import"./TextField-ea5a8ca7.js";_.string,_.func;const Yi=({trusteds:i,trusted:m,trustedsDispatch:I,setAllValue:U,listName:d})=>{const[Ni,ni]=p.useState(null);p.useState(null);const[Di,Oi]=p.useState(!1);p.useState(!1);const{setCallBack:qi}=p.useContext(Ti),Si=vi().shape({img:s().max(500)}),A=p.useMemo(()=>({img:(m==null?void 0:m.img)||""}),[m]),ei=Qi({resolver:async(f,l,D)=>await Xi(Si)(f,l,D),defaultValues:A}),{reset:mi,watch:yi,setValue:k,handleSubmit:Li,formState:{isSubmitting:xi,isValid:w}}=ei,V=yi(),pi=Li(async f=>{console.log("Brands Images is valid")});p.useEffect(()=>{m&&(mi(A),qi(pi))},[m,A,mi]);const C=(f,l,D)=>{const gi=f?f[0]:null,hi=i.findIndex(x=>x.id==l.id),j=i.map((x,b)=>b===hi?{...x,[D]:gi}:x);U(d,j),I({type:"edit",newTrusted:j,index:hi})},Ei=p.useCallback(f=>{const l=f[0];Oi(!0);const D=Object.assign(l,{preview:URL.createObjectURL(l)});ni(l),l&&k("img",D,{shouldValidate:!0})},[k]),Ii=p.useCallback(()=>{k("img",null),ni(null)},[k]);return a.jsx(Ji,{methods:ei,onSubmit:pi,children:a.jsx(R,{spacing:3,sx:{p:3},children:a.jsx(R,{spacing:1.5,children:a.jsx(na,{name:"img",maxSize:3145728,onDrop:f=>{C(f,m,"img"),Ei(f)},onDelete:f=>{C(null,m,"img"),Ii(f)},file:V.img||Ni})})})})};Yi.propTypes={trusteds:_.array.isRequired,trusted:_.object.isRequired,trustedsDispatch:_.func.isRequired,setAllValue:_.func.isRequired,listName:_.string.isRequired};const si=({trusteds:i,trustedsDispatch:m,setAllValue:I,listName:U})=>a.jsx(a.Fragment,{children:a.jsx(Mi,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:i==null?void 0:i.map(d=>a.jsx(Mi,{sx:{width:"50%"},children:a.jsx(Yi,{id:d.id,trusted:d,trusteds:i,trustedsDispatch:m,setAllValue:I,listName:U},d.id)}))})});si.propTypes={trusteds:_.array.isRequired,trustedsDispatch:_.func.isRequired,setAllValue:_.func.isRequired,listName:_.string.isRequired};function Zi({currentTrusted:i}){const m=ri(),I=ui("up","md"),{enqueueSnackbar:U}=ea(),d=(i==null?void 0:i.listOne)||[],Ni=(i==null?void 0:i.listTow)||[],ni=(i==null?void 0:i.listThree)||[],Di=(i==null?void 0:i.listFour)||[],[Oi,qi]=p.useReducer(Fi,d),[Si,A]=p.useReducer(Fi,Ni),[ei,mi]=p.useReducer(Fi,ni),[yi,k]=p.useReducer(Fi,Di),Li=vi().shape({titleOne_ar:s().min(4).max(50).required("الجزء الأول من العنوان مطلوب باللغة العربية"),titleOne_en:s().min(4).max(50).required("English First section of title is required"),titleOne_cr:s().min(4).max(50).required("kurd First section of title is required"),span_ar:s().min(4).max(50).required("الكلمة المميزة مطلوبة بالعربية"),span_en:s().min(4).max(50).required("English Special Word is required"),span_cr:s().min(4).max(50).required("kurd Special Word is required"),titleTow_ar:s().min(4).max(50).required("الجزء الثاني من العنوان مطلوب باللغة العربية"),titleTow_en:s().min(4).max(50).required("English Second section of title is required"),titleTow_cr:s().min(4).max(50).required("kurd Second section of title is required"),listOneN_ar:s().min(3).max(30).required("اسم المجموعة الاولى مطلوب بالعربية"),listOneN_en:s().min(3).max(30).required("English first Group Name is required"),listOneN_cr:s().min(3).max(30).required("Kurd first Group Name is required"),listTowN_ar:s().min(3).max(30).required("اسم المجموعة الثانية مطلوب بالعربية"),listTowN_en:s().min(3).max(30).required("English second Group Name is required"),listTowN_cr:s().min(3).max(30).required("Kurd second Group Name is required"),listThreeN_ar:s().min(3).max(30).required("اسم المجموعة الثالثة مطلوب بالعربية"),listThreeN_en:s().min(3).max(30).required("English Third Group Name is required"),listThreeN_cr:s().min(3).max(30).required("Kurd Third Group Name is required"),listFourN_ar:s().min(3).max(30).required("اسم المجموعة الرابعة مطلوب بالعربية"),listFourN_en:s().min(3).max(30).required("English Ford Group Name is required"),listFourN_cr:s().min(3).max(30).required("Kurd Ford Group Name is required"),ListOne:ji().min(1).max(10).required("English First Trusted List"),ListTow:ji().min(1).max(10).required("English Second Trusted List"),ListThree:ji().min(1).max(10).required("English Third Trusted List"),ListFour:ji().min(1).max(10).required("English Ford Trusted List")}),xi=p.useMemo(()=>{var j,x,b,L,E,G,B,K,$,P,W,z,H,c,M,v,Q,J,X,Y,Z,T,r,u,ii,ai,li,S,ti,fi,wi,_i,o,F,g,h,N,t,e,O,Ri,ki,Vi,Ui,Ai,Gi,Bi,Ki,$i,Pi,Wi,zi,Hi,ci;return{titleOne_ar:((x=(j=i==null?void 0:i.lang)==null?void 0:j.ar)==null?void 0:x.titleOne)||"",titleOne_en:((L=(b=i==null?void 0:i.lang)==null?void 0:b.en)==null?void 0:L.titleOne)||"",titleOne_cr:((G=(E=i==null?void 0:i.lang)==null?void 0:E.cr)==null?void 0:G.titleOne)||"",titleTow_ar:((K=(B=i==null?void 0:i.lang)==null?void 0:B.ar)==null?void 0:K.titleTow)||"",titleTow_en:((P=($=i==null?void 0:i.lang)==null?void 0:$.en)==null?void 0:P.titleTow)||"",titleTow_cr:((z=(W=i==null?void 0:i.lang)==null?void 0:W.cr)==null?void 0:z.titleTow)||"",span_ar:((c=(H=i==null?void 0:i.lang)==null?void 0:H.ar)==null?void 0:c.span)||"",span_en:((v=(M=i==null?void 0:i.lang)==null?void 0:M.en)==null?void 0:v.span)||"",span_cr:((J=(Q=i==null?void 0:i.lang)==null?void 0:Q.cr)==null?void 0:J.span)||"",listOneN_ar:(Z=(Y=(X=i==null?void 0:i.lang)==null?void 0:X.ar)==null?void 0:Y.listOne)==null?void 0:Z.name,listOneN_en:(u=(r=(T=i==null?void 0:i.lang)==null?void 0:T.en)==null?void 0:r.listOne)==null?void 0:u.name,listOneN_cr:(li=(ai=(ii=i==null?void 0:i.lang)==null?void 0:ii.cr)==null?void 0:ai.listOne)==null?void 0:li.name,listTowN_ar:(fi=(ti=(S=i==null?void 0:i.lang)==null?void 0:S.ar)==null?void 0:ti.listTow)==null?void 0:fi.name,listTowN_en:(o=(_i=(wi=i==null?void 0:i.lang)==null?void 0:wi.en)==null?void 0:_i.listTow)==null?void 0:o.name,listTowN_cr:(h=(g=(F=i==null?void 0:i.lang)==null?void 0:F.cr)==null?void 0:g.listTow)==null?void 0:h.name,listThreeN_ar:(e=(t=(N=i==null?void 0:i.lang)==null?void 0:N.ar)==null?void 0:t.listThree)==null?void 0:e.name,listThreeN_en:(ki=(Ri=(O=i==null?void 0:i.lang)==null?void 0:O.en)==null?void 0:Ri.listThree)==null?void 0:ki.name,listThreeN_cr:(Ai=(Ui=(Vi=i==null?void 0:i.lang)==null?void 0:Vi.cr)==null?void 0:Ui.listThree)==null?void 0:Ai.name,listFourN_ar:(Ki=(Bi=(Gi=i==null?void 0:i.lang)==null?void 0:Gi.ar)==null?void 0:Bi.listFour)==null?void 0:Ki.name,listFourN_en:(Wi=(Pi=($i=i==null?void 0:i.lang)==null?void 0:$i.en)==null?void 0:Pi.listFour)==null?void 0:Wi.name,listFourN_cr:(ci=(Hi=(zi=i==null?void 0:i.lang)==null?void 0:zi.cr)==null?void 0:Hi.listFour)==null?void 0:ci.name,ListOne:(i==null?void 0:i.listOne)||"",ListTow:(i==null?void 0:i.listTow)||"",ListThree:(i==null?void 0:i.listThree)||"",ListFour:(i==null?void 0:i.listFour)||""}},[i]),w=Qi({resolver:async(j,x,b)=>await Xi(Li)(j,x,b),defaultValues:xi}),{reset:V,watch:pi,setValue:C,handleSubmit:Ei,formState:{isSubmitting:Ii,isValid:f}}=w,l=pi();p.useEffect(()=>{i&&V(xi)},[i,xi,V]);const D=Ei(async j=>{var x,b,L,E,G,B,K,$,P,W,z,H,c,M,v,Q,J,X,Y,Z,T,r,u,ii,ai,li;try{const S=await Promise.all(l==null?void 0:l.ListOne.map(async(o,F)=>{var g,h;if(typeof o.img=="object"){const N=i==null?void 0:i.listOne.findIndex(e=>e.id==o.id);(g=i==null?void 0:i.listOne[N])!=null&&g.img&&await y.post("/deleteFile",{fileUrl:(h=i==null?void 0:i.listOne[F])==null?void 0:h.img});const t=new FormData;if(o.img){t.append("file",o.img);const e=await y.post("/uploadFile/trusteds",t,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:O}=e.data.data;o.img=O}}return o})),ti=await Promise.all(l==null?void 0:l.ListTow.map(async(o,F)=>{var g,h;if(typeof o.img=="object"){const N=i==null?void 0:i.listTow.findIndex(e=>e.id==o.id);(g=i==null?void 0:i.listTow[N])!=null&&g.img&&await y.post("/deleteFile",{fileUrl:(h=i==null?void 0:i.listTow[F])==null?void 0:h.img});const t=new FormData;if(o.img){t.append("file",o.img);const e=await y.post("/uploadFile/trusteds",t,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:O}=e.data.data;o.img=O}}return o})),fi=await Promise.all(l==null?void 0:l.ListThree.map(async(o,F)=>{var g,h;if(typeof o.img=="object"){const N=i==null?void 0:i.listThree.findIndex(e=>e.id==o.id);(g=i==null?void 0:i.listThree[N])!=null&&g.img&&await y.post("/deleteFile",{fileUrl:(h=i==null?void 0:i.listThree[F])==null?void 0:h.img});const t=new FormData;if(o.img){t.append("file",o.img);const e=await y.post("/uploadFile/trusteds",t,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:O}=e.data.data;o.img=O}}return o})),wi=await Promise.all(l==null?void 0:l.ListFour.map(async(o,F)=>{var g,h;if(typeof o.img=="object"){const N=i==null?void 0:i.listFour.findIndex(e=>e.id==o.id);(g=i==null?void 0:i.listFour[N])!=null&&g.img&&await y.post("/deleteFile",{fileUrl:(h=i==null?void 0:i.listFour[F])==null?void 0:h.img});const t=new FormData;if(o.img){t.append("file",o.img);const e=await y.post("/uploadFile/trusteds",t,{headers:{"Content-Type":"multipart/form-data"}}),{fileUrl:O}=e.data.data;o.img=O}}return o})),_i={lang:{ar:{titleOne:l==null?void 0:l.titleOne_ar,titleTow:l==null?void 0:l.titleTow_ar,span:l==null?void 0:l.span_ar,listOne:{...(b=(x=i==null?void 0:i.lang)==null?void 0:x.ar)==null?void 0:b.listOne,name:l.listOneN_ar},listTow:{...(E=(L=i==null?void 0:i.lang)==null?void 0:L.ar)==null?void 0:E.listTow,name:l.listTowN_ar},listThree:{...(B=(G=i==null?void 0:i.lang)==null?void 0:G.ar)==null?void 0:B.listThree,name:l.listThreeN_ar},listFour:{...($=(K=i==null?void 0:i.lang)==null?void 0:K.ar)==null?void 0:$.listFour,name:l.listFourN_ar}},en:{titleOne:l==null?void 0:l.titleOne_en,titleTow:l==null?void 0:l.titleTow_en,span:l==null?void 0:l.span_en,listOne:{...(W=(P=i==null?void 0:i.lang)==null?void 0:P.en)==null?void 0:W.listOne,name:l.listOneN_en},listTow:{...(H=(z=i==null?void 0:i.lang)==null?void 0:z.en)==null?void 0:H.listTow,name:l.listTowN_en},listThree:{...(M=(c=i==null?void 0:i.lang)==null?void 0:c.en)==null?void 0:M.listThree,name:l.listThreeN_en},listFour:{...(Q=(v=i==null?void 0:i.lang)==null?void 0:v.en)==null?void 0:Q.listFour,name:l.listFourN_en}},cr:{titleOne:l==null?void 0:l.titleOne_cr,titleTow:l==null?void 0:l.titleTow_cr,span:l==null?void 0:l.span_cr,listOne:{...(X=(J=i==null?void 0:i.lang)==null?void 0:J.cr)==null?void 0:X.listOne,name:l.listOneN_cr},listTow:{...(Z=(Y=i==null?void 0:i.lang)==null?void 0:Y.cr)==null?void 0:Z.listTow,name:l.listTowN_cr},listThree:{...(r=(T=i==null?void 0:i.lang)==null?void 0:T.cr)==null?void 0:r.listThree,name:l.listThreeN_cr},listFour:{...(ii=(u=i==null?void 0:i.lang)==null?void 0:u.cr)==null?void 0:ii.listFour,name:l.listFourN_cr}}},listOne:S,listTow:ti,listThree:fi,listFour:wi};await y.put("/edit/trusteds",_i),V(),U("Update success!"),window.location.reload(),di.success("Trusted's Updated Successfully.")}catch(S){di.error(((li=(ai=S==null?void 0:S.response)==null?void 0:ai.data)==null?void 0:li.msg)||"Something went wrong!"),console.error(S)}}),gi=a.jsxs(a.Fragment,{children:[I&&a.jsxs(oi,{md:4,children:[a.jsx(q,{variant:"h6",sx:{mb:.5},children:"Texts"}),a.jsx(q,{variant:"body2",sx:{color:"text.secondary"},children:"Title, description, buttons..."})]}),a.jsx(oi,{xs:12,md:8,children:a.jsxs(xa,{children:[!I&&a.jsx(bi,{title:"Texts"}),a.jsx(bi,{title:"Arabic Text"}),a.jsxs(R,{spacing:3,sx:{p:3},children:[a.jsx(n,{name:"titleOne_ar",label:"الجزء الأول من العنوان بالعربية",sx:{direction:"rtl"}}),a.jsx(n,{name:"span_ar",label:"الكلمة المميزة بالعربية",sx:{direction:"rtl"}}),a.jsx(n,{name:"titleTow_ar",label:"الجزء الثاني من العنوان بالعربية",sx:{direction:"rtl"}}),a.jsxs(R,{spacing:3,sx:{p:3},children:[a.jsx(q,{variant:"h6",sx:{mb:.5},children:"Arabic Trusted List"}),a.jsx(n,{name:"listOneN_ar",label:"اسم المجموعة الاولى بالعربية بالعربية",sx:{direction:"rtl"}}),a.jsx(n,{name:"listTowN_ar",label:"اسم المجموعة الثانية بالعربية بالعربية",sx:{direction:"rtl"}}),a.jsx(n,{name:"listThreeN_ar",label:"اسم المجموعة الثالة بالعربية بالعربية",sx:{direction:"rtl"}}),a.jsx(n,{name:"listFourN_ar",label:"اسم المجموعة الرابعة بالعربية بالعربية",sx:{direction:"rtl"}})]}),a.jsx(bi,{title:"English Text"}),a.jsx(n,{name:"titleOne_en",label:"English First section of title"}),a.jsx(n,{name:"span_en",label:"English Special Word"}),a.jsx(n,{name:"titleTow_en",label:"English Second section of title"}),a.jsxs(R,{spacing:3,sx:{p:3},children:[a.jsx(q,{variant:"h6",sx:{mb:.5},children:"English Trusted List"}),a.jsx(n,{name:"listOneN_en",label:"English First group name"}),a.jsx(n,{name:"listTowN_en",label:"English Second group name"}),a.jsx(n,{name:"listThreeN_en",label:"English Third group name"}),a.jsx(n,{name:"listFourN_en",label:"English Ford group name"})]}),a.jsx(bi,{title:"Kurd Text"}),a.jsx(n,{name:"titleOne_cr",label:"kurd First section of title"}),a.jsx(n,{name:"span_cr",label:"kurd Special Word"}),a.jsx(n,{name:"titleTow_cr",label:"kurd Second section of title"}),a.jsxs(R,{spacing:3,sx:{p:3},children:[a.jsx(q,{variant:"h6",sx:{mb:.5},children:"kurd Trusted List"}),a.jsx(n,{name:"listOneN_cr",label:"Kurd First group name"}),a.jsx(n,{name:"listTowN_cr",label:"Kurd Second group name"}),a.jsx(n,{name:"listThreeN_cr",label:"Kurd Third group name"}),a.jsx(n,{name:"listFourN_cr",label:"Kurd Ford group name"})]})]}),a.jsxs(R,{spacing:0,sx:{p:3},children:[a.jsx(q,{variant:"h4",sx:{mb:.5},children:'"Brands Groups" Images'}),a.jsx(q,{variant:"h6",sx:{mb:.5},children:`"${l.listOneN_en}" Images`}),a.jsx(si,{setAllValue:C,trusteds:Oi,trustedsDispatch:qi,listName:"ListOne"}),a.jsx(q,{variant:"h6",sx:{mb:.5},children:`"${l.listTowN_en}" Images`}),a.jsx(si,{setAllValue:C,trusteds:Si,trustedsDispatch:A,listName:"ListTow"}),a.jsx(q,{variant:"h6",sx:{mb:.5},children:`"${l.listThreeN_en}" Images`}),a.jsx(si,{setAllValue:C,trusteds:ei,trustedsDispatch:mi,listName:"ListThree"}),a.jsx(q,{variant:"h6",sx:{mb:.5},children:`"${l.listFourN_en}" Images`}),a.jsx(si,{setAllValue:C,trusteds:yi,trustedsDispatch:k,listName:"ListFour"})]})]})})]}),hi=a.jsxs(a.Fragment,{children:[I&&a.jsx(oi,{md:4}),a.jsxs(oi,{xs:12,md:8,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx(ia,{color:"inherit",variant:"outlined",size:"large",onClick:()=>{V(),m.push(Ci.dashboard.root)},children:"cancel"}),a.jsx(pa,{type:"submit",variant:"contained",size:"large",loading:Ii,sx:{ml:2},onClick:async()=>{var j,x;(j=w==null?void 0:w.formState)!=null&&j.errors&&Object.keys((x=w==null?void 0:w.formState)==null?void 0:x.errors).map(L=>{var E;di.error((E=w==null?void 0:w.formState)==null?void 0:E.errors[L].message)})},children:"Save Trusted"})]})]});return a.jsx(Ji,{methods:w,onSubmit:D,children:a.jsxs(oi,{container:!0,spacing:3,children:[gi,hi]})})}Zi.propTypes={currentTrusted:_.object};function ga(){const i=aa(),{trusted:m}=sa();return a.jsxs(la,{maxWidth:i.themeStretch?!1:"lg",children:[a.jsx(ma,{heading:"Edit Trusted Section",links:[{name:"Dashboard",href:Ci.dashboard.root},{name:"trusted",href:Ci.dashboard.service.root}],sx:{mb:{xs:3,md:5}}}),m&&a.jsx(Zi,{currentTrusted:m})]})}function qa(){return a.jsxs(a.Fragment,{children:[a.jsx(oa,{children:a.jsx("title",{children:" Dashboard: Trusteds Edit"})}),a.jsx(ga,{})]})}export{qa as default};
